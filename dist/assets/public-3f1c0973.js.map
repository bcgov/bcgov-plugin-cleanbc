{"version":3,"file":"public-3f1c0973.js","sources":["../../scripts/public/accessibility.js","../../scripts/public/definitions.js","../../scripts/public/dom-loader.js","../../scripts/public/driver-category-query.js","../../scripts/public/landing-banners.js","../../scripts/public/search.js"],"sourcesContent":["/**\n * Accessibility DOM manipulation.\n */\nconst bcgovBlockThemePluginAccessibility = () => {\n\t/*\n\t * SafarIE iOS requires window.requestAnimationFrame update.\n\t */\n\twindow.requestAnimationFrame(() => {\n\n\t\tconst actionsAccordionHeader = document.querySelector('.actions-accordion-header');\n\t\tif (null !== actionsAccordionHeader) {\n\t\t\tconst getSiblings = function (elem) {\n\t\t\t\t// Setup siblings array and get the first sibling\n\t\t\t\tconst siblings = [];\n\t\t\t\tlet sibling = elem.parentNode.firstChild;\n\n\t\t\t\t// Loop through each sibling and push to the array\n\t\t\t\twhile (sibling) {\n\t\t\t\t\tif (1 === sibling.nodeType && sibling !== elem) {\n\t\t\t\t\t\tsiblings.push(sibling);\n\t\t\t\t\t}\n\t\t\t\t\tif (null !== sibling.nextSibling) {\n\t\t\t\t\t\tsibling = sibling.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn siblings;\n\t\t\t};\n\t\t\t/*\n\t\t\t * Inject ARIA labels into queried content.\n\t\t\t */\n\t\t\tconst labelEls = document.querySelectorAll('.labelInjector');\n\t\t\tlabelEls.forEach((label) => {\n\t\t\t\tconst siblings = getSiblings(label);\n\t\t\t\tconst ariaLabel = label.getAttribute('data-label');\n\t\t\t\tsiblings.forEach((el) => {\n\t\t\t\t\tif (el.classList.contains('wp-block-buttons')) {\n\t\t\t\t\t\tconst link = el.querySelector('.wp-block-button__link');\n\t\t\t\t\t\tlink.setAttribute('aria-label', ariaLabel);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlabel.remove();\n\t\t\t});\n\t\t}\n\t});\n};\n\nif ('complete' === document.readyState) {\n\tbcgovBlockThemePluginAccessibility();\n} else {\n\tdocument.addEventListener('DOMContentLoaded',\n\t\tbcgovBlockThemePluginAccessibility\n\t);\n}\n","/**\n * General CleanBC Definitons dialog generator.\n */\nconst bcgovBlockThemePluginDefnitions = () => {\n    /*\n     * SafarIE iOS requires window.requestAnimationFrame update.\n     */\n    window.requestAnimationFrame(() => {\n        const links = document.querySelectorAll('a:not(#postFilterApp a)');\n\n        const definitionLinks = Array.from(links).filter(function (link) {\n            return link.href.includes('definitions');\n        });\n\n        if (definitionLinks.length > 0) {\n            const dialog = document.createElement('dialog');\n            dialog.id = 'dialog';\n            dialog.className = 'dialog';\n            dialog.setAttribute('aria-modal', true);\n            dialog.setAttribute('aria-live', 'polite');\n            dialog.innerHTML =\n                '<div class=\"dialog-content\"></div><button id=\"close-dialog\" aria-label=\"closes defintion dialog\">Close</button>';\n            document.body.appendChild(dialog);\n\n            const closeDialogButton = document.getElementById('close-dialog');\n\n            closeDialogButton.addEventListener('click', function () {\n                dialog.close();\n            });\n\n            definitionLinks.forEach(function (link) {\n                link.classList.add('icon-definition');\n                link.setAttribute(\n                    'aria-label',\n                    'opens definition dialog for: ' + link.text\n                );\n\n                // Adding event listeners for both click and keypress events\n                addEventListeners(link);\n            });\n\n        }\n        /**\n         *\n         * @param element\n         */\n        function addEventListeners(element) {\n            element.addEventListener('click', handleClick);\n            element.addEventListener('keypress', handleKeypress);\n        }\n\n        /**\n         *\n         * @param event\n         */\n        async function handleClick(event) {\n            if (\n                'click' === event.type ||\n                ('keypress' === event.type && 'Enter' === event.key)\n            ) {\n                event.preventDefault();\n                const url = event.currentTarget.getAttribute('href');\n                console.log('url', url);\n                const cachedData = window.sessionStorage.getItem(url);\n                console.log('cachedData', cachedData);\n                if (cachedData) {\n                    const { title, content } = JSON.parse(cachedData);\n                    displayContent(title, content);\n                } else {\n                    try {\n                        const response = await fetch(url);\n        \n                        if (!response.ok) {\n                            throw new Error(`HTTP error! Status: ${response.status}`);\n                        }\n        \n                        const html = await response.text();\n                        const parser = new window.DOMParser();\n                        const doc = parser.parseFromString(html, 'text/html');\n        \n                        const titleElement = doc.querySelector('.wp-block-post-title');\n                        const contentElement = doc.querySelector('.entry-content');\n        \n                        if (!titleElement || !contentElement) {\n                            throw new Error(\n                                'Required content not found in the fetched HTML.'\n                            );\n                        }\n        \n                        const title = titleElement.innerText;\n                        const content = contentElement.innerHTML;\n                        const dataToCache = { title, content };\n        \n                        window.sessionStorage.setItem(url, JSON.stringify(dataToCache));\n                        displayContent(title, content);\n                    } catch (error) {\n                        console.error('Error fetching content:', error);\n                    }\n                }\n            }\n        }\n        \n\n        /**\n         *\n         * @param event\n         */\n        function handleKeypress(event) {\n            if ('Enter' === event.key || 13 === event.keycode) {\n                handleClick(event);\n            }\n        }\n\n        /**\n         *\n         * @param title\n         * @param content\n         */\n        function displayContent(title, content) {\n            const dialogContent = document.querySelector(\n                '#dialog .dialog-content'\n            );\n            dialogContent.innerHTML =\n                '<h2 tabindex=\"0\">' + title + '</h2>' + content;\n            showDialog();\n            dialogContent.querySelector('h2').focus();\n        }\n\n        /**\n         *\n         */\n        function showDialog() {\n            const dialog = document.getElementById('dialog');\n            dialog.showModal();\n        }\n    });\n};\n\nif ('complete' === document.readyState) {\n    bcgovBlockThemePluginDefnitions();\n} else {\n    document.addEventListener('DOMContentLoaded',\n        bcgovBlockThemePluginDefnitions\n    );\n}\n","/**\n * General CleanBC DOM manipulation.\n */\nconst bcgovBlockThemePluginDomLoader = () => {\n\t/*\n\t * SafarIE iOS requires window.requestAnimationFrame update.\n\t */\n\twindow.requestAnimationFrame( () => {\n\t\tconst body = document.querySelector( 'body' );\n\t\tbody.classList.add( 'cleanbc-plugin' );\n\t\t// CleanBC Icon Buttons\n\t\tconst iconButtons = document.querySelectorAll( 'a.icon' );\n\t\tif ( iconButtons.length ) {\n\t\t\ticonButtons.forEach( ( button ) => {\n\t\t\t\tif ( null === button.getAttribute( 'href' ) ) {\n\t\t\t\t\tbutton.setAttribute( 'tabindex', '-1' );\n\t\t\t\t\tbutton.style.pointerEvents = 'none';\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// This should be CSS...\n\t\tconst iconButtonContainers = document.querySelectorAll(\n\t\t\t'.wp-block-button.is-style-icon'\n\t\t);\n\t\tif ( iconButtonContainers.length ) {\n\t\t\ticonButtonContainers.forEach( ( container ) => {\n\t\t\t\tconst containerLink = container.querySelector( 'a' );\n\t\t\t\tif (\n\t\t\t\t\tnull !== containerLink &&\n\t\t\t\t\t! container.classList.contains( 'has-size-large' )\n\t\t\t\t) {\n\t\t\t\t\tcontainerLink.style.outlineOffset = '1rem';\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Glossary query loop processing to add separation headlines by letter of the alphabet.\n\t\tconst glossaryList = document.querySelector('.glossary-results ul');\n\t\tif (glossaryList) {\n\t\t\tconst items = Array.from(glossaryList.querySelectorAll('li'));\n\t\t\tlet currentLetter = '';\n\t\t\n\t\t\titems.forEach(item => {\n\t\t\t\tconst titleElement = item.querySelector('h3');\n\t\t\t\tif (titleElement) {\n\t\t\t\t\tconst titleText = titleElement.textContent.trim();\n\t\t\t\t\tconst firstLetter = titleText.charAt(0).toUpperCase();\n\t\t\n\t\t\t\t\tif (firstLetter !== currentLetter) {\n\t\t\t\t\t\tcurrentLetter = firstLetter;\n\t\t\n\t\t\t\t\t\t// Create and wrap the <h2>\n\t\t\t\t\t\tconst h2 = document.createElement('h2');\n\t\t\t\t\t\th2.textContent = currentLetter;\n\t\t\n\t\t\t\t\t\tconst h2Wrapper = document.createElement('li');\n\t\t\t\t\t\th2Wrapper.classList.add('glossary-letter-headline');\n\t\t\t\t\t\th2Wrapper.appendChild(h2);\n\t\t\n\t\t\t\t\t\t// Insert the new <li> with <h2> before the current item\n\t\t\t\t\t\tglossaryList.insertBefore(h2Wrapper, item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n};\n\nif ( 'complete' === document.readyState ) {\n\tbcgovBlockThemePluginDomLoader();\n} else {\n\tdocument.addEventListener('DOMContentLoaded',\n\t\tbcgovBlockThemePluginDomLoader\n\t);\n}\n","/**\n * General CleanBC Drivers page Query Loop manipulation.\n */\nconst bcgovBlockThemePluginDriverCategoryQuery = () => {\n    /*\n     * SafarIE iOS requires window.requestAnimationFrame update.\n     */\n    window.requestAnimationFrame(() => {\n        const queryLoopDriverCardContainer = document.querySelectorAll(\n            '.wp-block-query.vue-card-container'\n        );\n\n        if (queryLoopDriverCardContainer.length) {\n            fetchDataAndReplaceLinks();\n        }\n\n        /**\n         * Fetches data from a specified API endpoint, processes categories, replaces links with images,\n         * and caches the data to optimize subsequent calls. Cache expires afetr 1 day.\n         *\n         * @async\n         * @function fetchDataAndReplaceLinks\n         * @param {number} [page=1] - The offset for paginating through API results.\n         * @throws {Error} Throws an error if there's an HTTP error during the API fetch.\n         * @throws {Error} Throws an error if there's an issue parsing the cached data.\n         * @throws {Error} Throws an error if there's an issue during data fetching and processing.\n         * @return {Promise<void>} A Promise that resolves after fetching, processing, and replacing links.\n         */\n        async function fetchDataAndReplaceLinks(page = 1) {\n            try {\n                const perPage = 100;\n                const cachedData = window.localStorage.getItem('apiData');\n                const cachedTimestamp =\n                    window.localStorage.getItem('apiDataTimestamp');\n\n                // Initialize existingData as an array, even if there is no cached data\n                const existingData = cachedData ? JSON.parse(cachedData) : [];\n\n                if (cachedData && cachedTimestamp) {\n                    try {\n                        const currentTime = new Date().getTime();\n                        const timeDiff =\n                            currentTime - parseInt(cachedTimestamp, 10);\n                        const oneDayInMillis = 24 * 60 * 60 * 1000; // 1 day in milliseconds\n\n                        if (timeDiff < oneDayInMillis) {\n                            // Use cached data if it's less than a day old\n                            processCategories(existingData);\n                            return;\n                        }\n                    } catch (cacheError) {\n                        /* eslint-disable no-console */\n                        console.error(\n                            'Error parsing cached data:',\n                            cacheError.message\n                        );\n                        /* eslint-enable no-console */\n                    }\n                }\n\n                const response = await fetch(\n                    `${window.site?.domain}/wp-json/wp/v2/project?_embed&per_page=${perPage}&page=${page}&_category_image=true`\n                );\n\n                if (!response.ok) {\n                    throw new Error(`HTTP error! Status: ${response.status}`);\n                }\n\n                const newData = await response.json();\n                const mergedData = existingData.concat(newData);\n\n                // Store merged data in cache\n                window.localStorage.setItem(\n                    'apiData',\n                    JSON.stringify(mergedData)\n                );\n\n                // If there are more projects, recursively fetch the next page\n                if (newData.length >= perPage) {\n                    await fetchDataAndReplaceLinks(page + 1);\n                }\n\n                processCategories(mergedData);\n\n                // Store timestamp and enable cache override\n                window.localStorage.setItem(\n                    'apiDataTimestamp',\n                    new Date().getTime().toString()\n                );\n            } catch (error) {\n                /* eslint-disable no-console */\n                console.error('Error fetching data:', error.message);\n                /* eslint-enable no-console */\n            }\n        }\n\n        /**\n         * Processes category data extracted from the provided API response, filters out duplicates,\n         * and prepares an array of unique categories with associated images for further use.\n         *\n         * @function processCategories\n         * @param {Object[]} data - An array of project items from the API response.\n         * @return {void} The function does not return a value, but it logs the unique categories and calls replaceLinks with the processed data.\n         */\n        function processCategories(data) {\n            const categories = [];\n            const uniqueCategoryNames = new Set();\n\n            data.forEach((item) => {\n                const terms = item?._embedded?.['wp:term'] || [];\n\n                terms.forEach((categoryArray) => {\n                    categoryArray.forEach((category) => {\n                        const categoryName = category?.name;\n                        const categoryImage = category?.acf?.category_image;\n\n                        if (\n                            categoryName &&\n                            categoryName !== 'Actions we are taking' &&\n                            !uniqueCategoryNames.has(categoryName)\n                        ) {\n                            uniqueCategoryNames.add(categoryName); // Add the name to the set\n                            categories.push({\n                                name: categoryName,\n                                acf: {\n                                    category_image: categoryImage || null,\n                                },\n                            });\n                        }\n                    });\n                });\n            });\n\n            replaceLinks(categories);\n        }\n\n        /**\n         * Replaces links within elements of class 'taxonomy-category' with images based on the provided categories.\n         * Called from processCategories function.\n         *\n         * @function replaceLinks\n         * @param {Object[]} categories                        - An array of category objects containing name and acf properties.\n         * @param {string}   categories[].name                 - The name of the category.\n         * @param {Object}   [categories[].acf]                - Additional fields associated with the category (e.g., category_image).\n         * @param {string}   [categories[].acf.category_image] - The URL of the category image.\n         * @return {void} The function does not return a value, but it modifies the DOM by replacing links with images.\n         */\n        function replaceLinks(categories) {\n            document\n                .querySelectorAll('div.taxonomy-category')\n                .forEach((categoryDiv) => {\n                    const links = categoryDiv.querySelectorAll('a');\n                    const separators = categoryDiv.querySelectorAll(\n                        'span.wp-block-post-terms__separator'\n                    );\n\n                    separators.forEach((separator) => separator.remove());\n\n                    links.forEach((link) => {\n                        const categoryName = link.innerText.trim();\n\n                        if ('Actions we are taking' === categoryName) {\n                            link.remove();\n                            return;\n                        }\n\n                        // Find the category with the matching name\n                        const matchingCategory = categories.find(\n                            (category) => category.name === categoryName\n                        );\n\n                        // Replace the link with an image if the category is found\n                        if (matchingCategory) {\n                            const categoryImage =\n                                matchingCategory?.acf?.category_image;\n                            if (categoryImage) {\n                                // Create an image element\n                                const imgElement =\n                                    document.createElement('img');\n                                imgElement.src = categoryImage;\n                                imgElement.alt = categoryName;\n                                imgElement.title = categoryName;\n\n                                // Replace the link with the image\n                                link.replaceWith(imgElement);\n                            }\n                        }\n                    });\n\n                    categoryDiv.style.opacity = '1';\n                });\n        }\n    });\n};\n\nif ('complete' === document.readyState) {\n    bcgovBlockThemePluginDriverCategoryQuery();\n} else {\n    document.addEventListener('DOMContentLoaded',\n        bcgovBlockThemePluginDriverCategoryQuery\n    );\n}\n","/**\n * Landing banners manipulation.\n */\nconst bcgovBlockThemePluginLandingBanners = () => {\n\t/*\n\t * SafarIE iOS requires window.requestAnimationFrame update.\n\t */\n\twindow.requestAnimationFrame( () => {\n\t\t/*\n\t\t * Add a clip path SVG to create a mask on landing banner ::before elements.\n\t\t * Works in conjuction with .landing-cover-banner styles in _cleanbc--patterns-banners.scss.\n\t\t */\n\t\tconst isHomeBanner = document.querySelectorAll( '.home-cover-banner' );\n\t\tconst isLandingBanner = document.querySelectorAll( '.landing-cover-banner' );\n\n\t\tif ( isHomeBanner.length || isLandingBanner.length ) {\n\t\t\tconst svgNamespace = 'http://www.w3.org/2000/svg';\n\t\t\tconst svg = document.createElementNS( svgNamespace, 'svg' );\n\t\t\tconst clipElementDefs = document.createElementNS(\n\t\t\t\tsvgNamespace,\n\t\t\t\t'defs'\n\t\t\t);\n\t\t\tconst clipElementClipPath = document.createElementNS(\n\t\t\t\tsvgNamespace,\n\t\t\t\t'clipPath'\n\t\t\t);\n\t\t\tclipElementClipPath.setAttribute( 'id', 'svgPath' );\n\t\t\tconst clipElementPath = document.createElementNS(\n\t\t\t\tsvgNamespace,\n\t\t\t\t'path'\n\t\t\t);\n\t\t\tclipElementPath.setAttribute(\n\t\t\t\t'd',\n\t\t\t\t'M0,77.2v-24.7c0,-8.6,6.8,-15.6,15.3,-16l901.5,-36.6c44.3,-1.7,81.5,33.1,83.2,77.5l-1000,-0.2z'\n\t\t\t);\n\t\t\tclipElementClipPath.setAttribute( 'transform', 'scale(1.44)' );\n\n\t\t\t// Build the SVG structure\n\t\t\tsvg.appendChild( clipElementDefs );\n\t\t\tclipElementDefs.appendChild( clipElementClipPath );\n\t\t\tclipElementClipPath.appendChild( clipElementPath );\n\n\t\t\t// Set attributes and styles\n\t\t\tsvg.setAttribute( 'xmlns', svgNamespace );\n\t\t\tsvg.setAttribute( 'xmlns:xlink', 'http://www.w3.org/1999/xlink' );\n\t\t\tsvg.setAttribute( 'version', '1.1' );\n\t\t\tsvg.setAttribute( 'width', '100' );\n\t\t\tsvg.setAttribute( 'height', '100' );\n\t\t\tsvg.setAttribute( 'viewBox', '0 0 100 100' );\n\t\t\tsvg.setAttribute( 'preserveAspectRatio', 'none' );\n\t\t\tsvg.style.position = 'absolute';\n\t\t\tsvg.style.top = '0';\n\t\t\tsvg.style.left = '0';\n\t\t\tsvg.style.visibility = 'visible';\n\n\t\t\t// Insert the SVG after the body tag\n\t\t\tconst body = document.getElementsByTagName( 'body' )[ 0 ];\n\t\t\tbody.insertAdjacentElement( 'afterbegin', svg );\n\t\t}\n\t} );\n};\n\nif ( 'complete' === document.readyState ) {\n\tbcgovBlockThemePluginLandingBanners();\n} else {\n\tdocument.addEventListener('DOMContentLoaded',\n\t\tbcgovBlockThemePluginLandingBanners\n\t);\n}\n","/**\n * General CleanBC DOM manipulation.\n */\nconst bcgovBlockThemePluginSearch = () => {\n    /*\n     * SafarIE iOS requires window.requestAnimationFrame update.\n     */\n    window.requestAnimationFrame(() => {\n        const searchInput = document.querySelector('.wp-block-search__input');\n        const resultDetails = document.querySelector('.result-details');\n    \n        const extractWordsAndPhrases = (input) => {\n            // Match quoted phrases or standalone words\n            const regex = /\"([^\"]+)\"|\\b(\\w+)\\b/g;\n            const matches = [];\n            let match;\n            while ((match = regex.exec(input)) !== null) {\n                matches.push(match[1] || match[2]); // Add quoted phrases or single words\n            }\n            return matches;\n        }\n    \n        const highlightMatches = () => {\n    \n            const inputValue = searchInput.value.trim();\n            const searchTerms = extractWordsAndPhrases(inputValue);\n            const filteredTerms = searchTerms.filter(term => term.length >= 3);\n    \n            let content = resultDetails.innerHTML;\n    \n            const escapedTerms = filteredTerms.map(term => term.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'));\n            const regex = new RegExp(`(${escapedTerms.join('|')})`, 'gi');\n    \n            content = content.replace(regex, '<mark>$1</mark>');\n            content = content.replace(/<\\/mark>\\s*<mark>/g, ' '); // Remove unnecessary closing and opening tags.\n            resultDetails.innerHTML = content;\n        }\n    \n        if ( null !== searchInput && null !== resultDetails ) {\n           highlightMatches();\n        }\n});\n}\n\nif (document.readyState === 'complete') {\n    bcgovBlockThemePluginSearch();\n} else {\n    document.addEventListener('DOMContentLoaded',\n        bcgovBlockThemePluginSearch\n    );\n}\n"],"names":["bcgovBlockThemePluginAccessibility","window","requestAnimationFrame","document","querySelector","getSiblings","elem","siblings","sibling","parentNode","firstChild","nodeType","push","nextSibling","querySelectorAll","forEach","label","ariaLabel","getAttribute","el","classList","contains","setAttribute","remove","readyState","addEventListener","bcgovBlockThemePluginDefnitions","links","definitionLinks","Array","from","filter","link","href","includes","length","dialog","createElement","id","className","innerHTML","body","appendChild","getElementById","close","add","text","addEventListeners","element","handleClick","handleKeypress","async","event","type","key","preventDefault","url","currentTarget","console","log","cachedData","sessionStorage","getItem","title","content","JSON","parse","displayContent","response","fetch","ok","Error","status","html","doc","DOMParser","parseFromString","titleElement","contentElement","innerText","dataToCache","setItem","stringify","error","keycode","dialogContent","showDialog","showModal","focus","bcgovBlockThemePluginDomLoader","iconButtons","button","style","pointerEvents","iconButtonContainers","container","containerLink","outlineOffset","glossaryList","items","currentLetter","item","firstLetter","textContent","trim","charAt","toUpperCase","h2","h2Wrapper","insertBefore","bcgovBlockThemePluginDriverCategoryQuery","processCategories","data","categories","uniqueCategoryNames","Set","_a","_embedded","categoryArray","category","categoryName","name","categoryImage","acf","category_image","has","replaceLinks","categoryDiv","separator","matchingCategory","find","imgElement","src","alt","replaceWith","opacity","fetchDataAndReplaceLinks","page","perPage","localStorage","cachedTimestamp","existingData","timeDiff","Date","getTime","parseInt","cacheError","message","site","domain","newData","json","mergedData","concat","toString","bcgovBlockThemePluginLandingBanners","isHomeBanner","isLandingBanner","svgNamespace","svg","createElementNS","clipElementDefs","clipElementClipPath","clipElementPath","position","top","left","visibility","getElementsByTagName","insertAdjacentElement","bcgovBlockThemePluginSearch","searchInput","resultDetails","filteredTerms","input","regex","matches","match","exec","extractWordsAndPhrases","value","term","escapedTerms","map","replace","RegExp","join"],"mappings":"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"}