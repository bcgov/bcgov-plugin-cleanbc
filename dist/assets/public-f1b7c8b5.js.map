{"version":3,"file":"public-f1b7c8b5.js","sources":["../../scripts/public/accessibility.js","../../scripts/public/definitions.js","../../scripts/public/dom-loader.js","../../scripts/public/driver-category-query.js","../../scripts/public/landing-banners.js","../../scripts/public/search.js","../../scripts/public/side-scroll-generator.js"],"sourcesContent":["/**\n * Accessibility DOM manipulation.\n */\nconst bcgovBlockThemePluginAccessibility = () => {\n\t/*\n\t * SafarIE iOS requires window.requestAnimationFrame update.\n\t */\n\twindow.requestAnimationFrame(() => {\n\n\t\tconst actionsAccordionHeader = document.querySelector('.actions-accordion-header');\n\t\tif (null !== actionsAccordionHeader) {\n\t\t\tconst getSiblings = (elem) => {\n\t\t\t\t// Setup siblings array and get the first sibling\n\t\t\t\tconst siblings = [];\n\t\t\t\tlet sibling = elem.parentNode.firstChild;\n\n\t\t\t\t// Loop through each sibling and push to the array\n\t\t\t\twhile (sibling) {\n\t\t\t\t\tif (1 === sibling.nodeType && sibling !== elem) {\n\t\t\t\t\t\tsiblings.push(sibling);\n\t\t\t\t\t}\n\t\t\t\t\tif (null !== sibling.nextSibling) {\n\t\t\t\t\t\tsibling = sibling.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn siblings;\n\t\t\t};\n\t\t\t/*\n\t\t\t * Inject ARIA labels into queried content.\n\t\t\t */\n\t\t\tconst labelEls = document.querySelectorAll('.labelInjector');\n\t\t\tlabelEls.forEach((label) => {\n\t\t\t\tconst siblings = getSiblings(label);\n\t\t\t\tconst ariaLabel = label.getAttribute('data-label');\n\t\t\t\tsiblings.forEach((el) => {\n\t\t\t\t\tif (el.classList.contains('wp-block-buttons')) {\n\t\t\t\t\t\tconst link = el.querySelector('.wp-block-button__link');\n\t\t\t\t\t\tlink.setAttribute('aria-label', ariaLabel);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlabel.remove();\n\t\t\t});\n\t\t}\n\t});\n};\n\nif ('complete' === document.readyState) {\n\tbcgovBlockThemePluginAccessibility();\n} else {\n\tdocument.addEventListener('DOMContentLoaded',\n\t\tbcgovBlockThemePluginAccessibility\n\t);\n}\n","/**\n * General CleanBC Definitons dialog generator.\n */\nconst bcgovBlockThemePluginDefnitions = () => {\n    /*\n     * SafarIE iOS requires window.requestAnimationFrame update.\n     */\n    window.requestAnimationFrame(() => {\n        const links = document.querySelectorAll('a:not(#postFilterApp a)');\n\n        const definitionLinks = Array.from(links).filter((link) => {\n            return link.href.includes('definitions');\n        });\n\n        /**\n         * Adds event listeners for click and keypress events to the specified element.\n         *\n         * @param {HTMLElement} element - The DOM element to which the event listeners will be added.\n         * \n         * @fires click - Triggered when the element is clicked.\n         * @fires keypress - Triggered when a key is pressed while the element is focused.\n         */\n        const addEventListeners = (element) => {\n            element.addEventListener('click', handleClick);\n            element.addEventListener('keypress', handleKeypress);\n        }\n\n        /**\n         * Handles click and keypress events, fetching and displaying content based on a URL.\n         * \n         * @async\n         * @param {Event} event - The event object triggered by a user interaction.\n         * @property {string} event.type - The type of the event (e.g., 'click', 'keypress').\n         * @property {string} [event.key] - The key pressed during a keypress event (e.g., 'Enter').\n         * @property {HTMLElement} event.currentTarget - The element on which the event listener is attached.\n         * \n         * @throws {Error} Throws an error if the fetch operation fails or required elements are not found.\n         * \n         * @description\n         * - If the event is a `click` or a `keypress` with the `Enter` key, the function prevents the default action.\n         * - It checks if the URL's content is cached in `sessionStorage`.\n         * - If cached, it retrieves and displays the content.\n         * - If not cached, it fetches the content from the URL, parses it, and displays it.\n         * - The fetched content is cached in `sessionStorage` for future use.\n         */\n        const handleClick = async (event) => {\n            if (\n                'click' === event.type ||\n                ('keypress' === event.type && 'Enter' === event.key)\n            ) {\n                event.preventDefault();\n                const url = event.currentTarget.getAttribute('href');\n                const cachedData = window.sessionStorage.getItem(url);\n                \n                if (cachedData) {\n                    const { title, content } = JSON.parse(cachedData);\n                    displayContent(title, content);\n                } else {\n                    try {\n                        const response = await fetch(url);\n        \n                        if (!response.ok) {\n                            throw new Error(`HTTP error! Status: ${response.status}`);\n                        }\n        \n                        const html = await response.text();\n                        const parser = new window.DOMParser();\n                        const doc = parser.parseFromString(html, 'text/html');\n        \n                        const titleElement = doc.querySelector('.wp-block-post-title');\n                        const contentElement = doc.querySelector('.entry-content');\n        \n                        if (!titleElement || !contentElement) {\n                            throw new Error(\n                                'Required content not found in the fetched HTML.'\n                            );\n                        }\n        \n                        const title = titleElement.innerText;\n                        const content = contentElement.innerHTML;\n                        const dataToCache = { title, content };\n        \n                        window.sessionStorage.setItem(url, JSON.stringify(dataToCache));\n                        displayContent(title, content);\n                    } catch (error) {\n                        console.error('Error fetching content:', error);\n                    }\n                }\n            }\n        }\n        \n\n        /**\n         * Handles keypress events, triggering the `handleClick` function if the Enter key is pressed.\n         * \n         * @param {KeyboardEvent} event - The keyboard event object.\n         * @property {string} event.key - The name of the key pressed (e.g., 'Enter').\n         * @property {number} [event.keyCode] - The numeric keycode of the key pressed (e.g., 13 for Enter).\n         * \n         * @description\n         * - Checks if the key pressed is the Enter key.\n         * - If the Enter key is detected, the function delegates handling to the `handleClick` function.\n         */\n        const handleKeypress = (event) => {\n            if ('Enter' === event.key || 13 === event.keycode) {\n                handleClick(event);\n            }\n        }\n\n        /**\n         * Displays the specified content in a dialog and sets focus on the title.\n         * \n         * @param {string} title - The title to be displayed in the dialog.\n         * @param {string} content - The HTML content to be displayed in the dialog.\n         * \n         * @description\n         * - Updates the content of the dialog's `.dialog-content` element.\n         * - Sets the `tabindex` of the title to `0` to make it focusable.\n         * - Calls `showDialog()` to display the dialog.\n         * - Moves focus to the title (`<h2>` element) after rendering.\n         */\n        const displayContent = (title, content) => {\n            const dialogContent = document.querySelector(\n                '#dialog .dialog-content'\n            );\n            dialogContent.innerHTML =\n                '<h2 tabindex=\"0\">' + title + '</h2>' + content;\n            showDialog();\n            dialogContent.querySelector('h2').focus();\n        }\n\n        /**\n         * Displays a dialog element using the `showModal` method.\n         * \n         * @description\n         * - Retrieves the dialog element with the ID `dialog`.\n         * - Opens the dialog using the `showModal()` method, which displays it as a modal dialog.\n         * \n         * @throws {TypeError} Throws an error if the dialog element does not exist or is not a valid HTMLDialogElement.\n         */\n        const showDialog = () => {\n            const dialog = document.getElementById('dialog');\n            dialog.showModal();\n        }\n\n\n        if (definitionLinks.length > 0) {\n            const dialog = document.createElement('dialog');\n            dialog.id = 'dialog';\n            dialog.className = 'dialog';\n            dialog.setAttribute('aria-modal', true);\n            dialog.setAttribute('aria-live', 'polite');\n            dialog.innerHTML =\n                '<div class=\"dialog-content\"></div><button id=\"close-dialog\" aria-label=\"closes defintion dialog\">Close</button>';\n            document.body.appendChild(dialog);\n\n            const closeDialogButton = document.getElementById('close-dialog');\n\n            closeDialogButton.addEventListener('click', () => {\n                dialog.close();\n            });\n\n            definitionLinks.forEach((link) => {\n                link.classList.add('icon-definition');\n                link.setAttribute(\n                    'aria-label',\n                    'opens definition dialog for this concept'\n                );\n\n                addEventListeners(link);\n            });\n\n        }\n\n    });\n};\n\nif ('complete' === document.readyState) {\n    bcgovBlockThemePluginDefnitions();\n} else {\n    document.addEventListener('DOMContentLoaded',\n        bcgovBlockThemePluginDefnitions\n    );\n}\n","/**\n * General CleanBC DOM manipulation.\n */\nconst bcgovBlockThemePluginDomLoader = () => {\n\t/*\n\t * SafarIE iOS requires window.requestAnimationFrame update.\n\t */\n\twindow.requestAnimationFrame( () => {\n\t\tconst body = document.querySelector( 'body' );\n\t\tbody.classList.add( 'cleanbc-plugin' );\n\t\t// CleanBC Icon Buttons\n\t\tconst iconButtons = document.querySelectorAll( 'a.icon' );\n\t\tif ( iconButtons.length ) {\n\t\t\ticonButtons.forEach( ( button ) => {\n\t\t\t\tif ( null === button.getAttribute( 'href' ) ) {\n\t\t\t\t\tbutton.setAttribute( 'tabindex', '-1' );\n\t\t\t\t\tbutton.style.pointerEvents = 'none';\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// This should be CSS...\n\t\tconst iconButtonContainers = document.querySelectorAll(\n\t\t\t'.wp-block-button.is-style-icon'\n\t\t);\n\t\tif ( iconButtonContainers.length ) {\n\t\t\ticonButtonContainers.forEach( ( container ) => {\n\t\t\t\tconst containerLink = container.querySelector( 'a' );\n\t\t\t\tif (\n\t\t\t\t\tnull !== containerLink &&\n\t\t\t\t\t! container.classList.contains( 'has-size-large' )\n\t\t\t\t) {\n\t\t\t\t\tcontainerLink.style.outlineOffset = '1rem';\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Glossary query loop processing to add separation headlines by letter of the alphabet.\n\t\tconst glossaryList = document.querySelector('.glossary-results ul');\n\t\tif (glossaryList) {\n\t\t\tconst items = Array.from(glossaryList.querySelectorAll('li'));\n\t\t\tlet currentLetter = '';\n\t\t\n\t\t\titems.forEach(item => {\n\t\t\t\tconst titleElement = item.querySelector('h3');\n\t\t\t\tif (titleElement) {\n\t\t\t\t\tconst titleText = titleElement.textContent.trim();\n\t\t\t\t\tconst firstLetter = titleText.charAt(0).toUpperCase();\n\t\t\n\t\t\t\t\tif (firstLetter !== currentLetter) {\n\t\t\t\t\t\tcurrentLetter = firstLetter;\n\t\t\n\t\t\t\t\t\t// Create and wrap the <h2>\n\t\t\t\t\t\tconst h2 = document.createElement('h2');\n\t\t\t\t\t\th2.textContent = currentLetter;\n\t\t\n\t\t\t\t\t\tconst h2Wrapper = document.createElement('li');\n\t\t\t\t\t\th2Wrapper.classList.add('glossary-letter-headline');\n\t\t\t\t\t\th2Wrapper.appendChild(h2);\n\t\t\n\t\t\t\t\t\t// Insert the new <li> with <h2> before the current item\n\t\t\t\t\t\tglossaryList.insertBefore(h2Wrapper, item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n};\n\nif ( 'complete' === document.readyState ) {\n\tbcgovBlockThemePluginDomLoader();\n} else {\n\tdocument.addEventListener('DOMContentLoaded',\n\t\tbcgovBlockThemePluginDomLoader\n\t);\n}\n","/**\n * General CleanBC Drivers page Query Loop manipulation.\n */\nconst bcgovBlockThemePluginDriverCategoryQuery = () => {\n    /*\n     * SafarIE iOS requires window.requestAnimationFrame update.\n     */\n    window.requestAnimationFrame(() => {\n        const queryLoopDriverCardContainer = document.querySelectorAll(\n            '.wp-block-query.vue-card-container'\n        );\n\n        /**\n         * Fetches data from a specified API endpoint, processes categories, replaces links with images,\n         * and caches the data to optimize subsequent calls. Cache expires afetr 1 day.\n         *\n         * @async\n         * @function fetchDataAndReplaceLinks\n         * @param {number} [page=1] - The offset for paginating through API results.\n         * @throws {Error} Throws an error if there's an HTTP error during the API fetch.\n         * @throws {Error} Throws an error if there's an issue parsing the cached data.\n         * @throws {Error} Throws an error if there's an issue during data fetching and processing.\n         * @return {Promise<void>} A Promise that resolves after fetching, processing, and replacing links.\n         */\n        const fetchDataAndReplaceLinks = async (page = 1) => {\n            try {\n                const perPage = 100;\n                const cachedData = window.localStorage.getItem('apiData');\n                const cachedTimestamp =\n                    window.localStorage.getItem('apiDataTimestamp');\n\n                // Initialize existingData as an array, even if there is no cached data\n                const existingData = cachedData ? JSON.parse(cachedData) : [];\n\n                if (cachedData && cachedTimestamp) {\n                    try {\n                        const currentTime = new Date().getTime();\n                        const timeDiff =\n                            currentTime - parseInt(cachedTimestamp, 10);\n                        const oneDayInMillis = 24 * 60 * 60 * 1000; // 1 day in milliseconds\n\n                        if (timeDiff < oneDayInMillis) {\n                            // Use cached data if it's less than a day old\n                            processCategories(existingData);\n                            return;\n                        }\n                    } catch (cacheError) {\n                        /* eslint-disable no-console */\n                        console.error(\n                            'Error parsing cached data:',\n                            cacheError.message\n                        );\n                        /* eslint-enable no-console */\n                    }\n                }\n\n                const response = await fetch(\n                    `${window.site?.domain}/wp-json/wp/v2/project?_embed&per_page=${perPage}&page=${page}&_category_image=true`\n                );\n\n                if (!response.ok) {\n                    throw new Error(`HTTP error! Status: ${response.status}`);\n                }\n\n                const newData = await response.json();\n                const mergedData = existingData.concat(newData);\n\n                // Store merged data in cache\n                window.localStorage.setItem(\n                    'apiData',\n                    JSON.stringify(mergedData)\n                );\n\n                // If there are more projects, recursively fetch the next page\n                if (newData.length >= perPage) {\n                    await fetchDataAndReplaceLinks(page + 1);\n                }\n\n                processCategories(mergedData);\n\n                // Store timestamp and enable cache override\n                window.localStorage.setItem(\n                    'apiDataTimestamp',\n                    new Date().getTime().toString()\n                );\n            } catch (error) {\n                /* eslint-disable no-console */\n                console.error('Error fetching data:', error.message);\n                /* eslint-enable no-console */\n            }\n        }\n\n        /**\n         * Processes category data extracted from the provided API response, filters out duplicates,\n         * and prepares an array of unique categories with associated images for further use.\n         *\n         * @function processCategories\n         * @param {Object[]} data - An array of project items from the API response.\n         * @return {void} The function does not return a value, but it logs the unique categories and calls replaceLinks with the processed data.\n         */\n        const processCategories = (data) => {\n            const categories = [];\n            const uniqueCategoryNames = new Set();\n\n            data.forEach((item) => {\n                const terms = item?._embedded?.['wp:term'] || [];\n\n                terms.forEach((categoryArray) => {\n                    categoryArray.forEach((category) => {\n                        const categoryName = category?.name;\n                        const categoryImage = category?.acf?.category_image;\n\n                        if (\n                            categoryName &&\n                            categoryName !== 'Actions we are taking' &&\n                            !uniqueCategoryNames.has(categoryName)\n                        ) {\n                            uniqueCategoryNames.add(categoryName); // Add the name to the set\n                            categories.push({\n                                name: categoryName,\n                                acf: {\n                                    category_image: categoryImage || null,\n                                },\n                            });\n                        }\n                    });\n                });\n            });\n\n            replaceLinks(categories);\n        }\n\n        /**\n         * Replaces links within elements of class 'taxonomy-category' with images based on the provided categories.\n         * Called from processCategories function.\n         *\n         * @function replaceLinks\n         * @param {Object[]} categories                        - An array of category objects containing name and acf properties.\n         * @param {string}   categories[].name                 - The name of the category.\n         * @param {Object}   [categories[].acf]                - Additional fields associated with the category (e.g., category_image).\n         * @param {string}   [categories[].acf.category_image] - The URL of the category image.\n         * @return {void} The function does not return a value, but it modifies the DOM by replacing links with images.\n         */\n        const replaceLinks = (categories) => {\n            document\n                .querySelectorAll('div.taxonomy-category')\n                .forEach((categoryDiv) => {\n                    const links = categoryDiv.querySelectorAll('a');\n                    const separators = categoryDiv.querySelectorAll(\n                        'span.wp-block-post-terms__separator'\n                    );\n\n                    separators.forEach((separator) => separator.remove());\n\n                    links.forEach((link) => {\n                        const categoryName = link.innerText.trim();\n\n                        if ('Actions we are taking' === categoryName) {\n                            link.remove();\n                            return;\n                        }\n\n                        // Find the category with the matching name\n                        const matchingCategory = categories.find(\n                            (category) => category.name === categoryName\n                        );\n\n                        // Replace the link with an image if the category is found\n                        if (matchingCategory) {\n                            const categoryImage =\n                                matchingCategory?.acf?.category_image;\n                            if (categoryImage) {\n                                // Create an image element\n                                const imgElement =\n                                    document.createElement('img');\n                                imgElement.src = categoryImage;\n                                imgElement.alt = categoryName;\n                                imgElement.title = categoryName;\n\n                                // Replace the link with the image\n                                link.replaceWith(imgElement);\n                            }\n                        }\n                    });\n\n                    categoryDiv.style.opacity = '1';\n                });\n        }\n\n        if (queryLoopDriverCardContainer.length) {\n            fetchDataAndReplaceLinks();\n        }\n    });\n};\n\nif ('complete' === document.readyState) {\n    bcgovBlockThemePluginDriverCategoryQuery();\n} else {\n    document.addEventListener('DOMContentLoaded',\n        bcgovBlockThemePluginDriverCategoryQuery\n    );\n}\n","/**\n * Landing banners manipulation.\n */\nconst bcgovBlockThemePluginLandingBanners = () => {\n\t/*\n\t * SafarIE iOS requires window.requestAnimationFrame update.\n\t */\n\twindow.requestAnimationFrame( () => {\n\t\t/*\n\t\t * Add a clip path SVG to create a mask on landing banner ::before elements.\n\t\t * Works in conjuction with .landing-cover-banner styles in _cleanbc--patterns-banners.scss.\n\t\t */\n\t\tconst isHomeBanner = document.querySelectorAll( '.home-cover-banner' );\n\t\tconst isLandingBanner = document.querySelectorAll( '.landing-cover-banner' );\n\n\t\tif ( isHomeBanner.length || isLandingBanner.length ) {\n\t\t\tconst svgNamespace = 'http://www.w3.org/2000/svg';\n\t\t\tconst svg = document.createElementNS( svgNamespace, 'svg' );\n\t\t\tconst clipElementDefs = document.createElementNS(\n\t\t\t\tsvgNamespace,\n\t\t\t\t'defs'\n\t\t\t);\n\t\t\tconst clipElementClipPath = document.createElementNS(\n\t\t\t\tsvgNamespace,\n\t\t\t\t'clipPath'\n\t\t\t);\n\t\t\tclipElementClipPath.setAttribute( 'id', 'svgPath' );\n\t\t\tconst clipElementPath = document.createElementNS(\n\t\t\t\tsvgNamespace,\n\t\t\t\t'path'\n\t\t\t);\n\t\t\tclipElementPath.setAttribute(\n\t\t\t\t'd',\n\t\t\t\t'M0,77.2v-24.7c0,-8.6,6.8,-15.6,15.3,-16l901.5,-36.6c44.3,-1.7,81.5,33.1,83.2,77.5l-1000,-0.2z'\n\t\t\t);\n\t\t\tclipElementClipPath.setAttribute( 'transform', 'scale(1.44)' );\n\n\t\t\t// Build the SVG structure\n\t\t\tsvg.appendChild( clipElementDefs );\n\t\t\tclipElementDefs.appendChild( clipElementClipPath );\n\t\t\tclipElementClipPath.appendChild( clipElementPath );\n\n\t\t\t// Set attributes and styles\n\t\t\tsvg.setAttribute( 'xmlns', svgNamespace );\n\t\t\tsvg.setAttribute( 'xmlns:xlink', 'http://www.w3.org/1999/xlink' );\n\t\t\tsvg.setAttribute( 'version', '1.1' );\n\t\t\tsvg.setAttribute( 'width', '100' );\n\t\t\tsvg.setAttribute( 'height', '100' );\n\t\t\tsvg.setAttribute( 'viewBox', '0 0 100 100' );\n\t\t\tsvg.setAttribute( 'preserveAspectRatio', 'none' );\n\t\t\tsvg.style.position = 'absolute';\n\t\t\tsvg.style.top = '0';\n\t\t\tsvg.style.left = '0';\n\t\t\tsvg.style.visibility = 'visible';\n\n\t\t\t// Insert the SVG after the body tag\n\t\t\tconst body = document.getElementsByTagName( 'body' )[ 0 ];\n\t\t\tbody.insertAdjacentElement( 'afterbegin', svg );\n\t\t}\n\t} );\n};\n\nif ( 'complete' === document.readyState ) {\n\tbcgovBlockThemePluginLandingBanners();\n} else {\n\tdocument.addEventListener('DOMContentLoaded',\n\t\tbcgovBlockThemePluginLandingBanners\n\t);\n}\n","/**\n * General CleanBC DOM manipulation.\n */\nconst bcgovBlockThemePluginSearch = () => {\n    /*\n     * SafarIE iOS requires window.requestAnimationFrame update.\n     */\n    window.requestAnimationFrame(() => {\n        const searchInput = document.querySelector('.wp-block-search__input');\n        const resultDetails = document.querySelector('.result-details');\n    \n        const extractWordsAndPhrases = (input) => {\n            // Match quoted phrases or standalone words\n            const regex = /\"([^\"]+)\"|\\b(\\w+)\\b/g;\n            const matches = [];\n            let match;\n            while ((match = regex.exec(input)) !== null) {\n                matches.push(match[1] || match[2]); // Add quoted phrases or single words\n            }\n            return matches;\n        }\n\n        const highlightMatches = () => {\n            const inputValue = searchInput.value.trim();\n            const searchTerms = extractWordsAndPhrases(inputValue);\n            const filteredTerms = searchTerms.filter(term => term.length >= 3);\n        \n            const escapedTerms = filteredTerms.map(term => term.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'));\n            const regex = new RegExp(`(${escapedTerms.join('|')})`, 'gi');\n        \n            const walkNodes = (node) => {\n                if (node.nodeType === Node.TEXT_NODE) {\n                    if (regex.test(node.nodeValue)) {\n                        const parent = node.parentNode;\n        \n                        // Apply highlights only to the visible text (not attributes)\n                        const fragments = node.nodeValue.split(regex);\n                        const fragmentContainer = document.createDocumentFragment();\n        \n                        fragments.forEach((fragment) => {\n                            if (regex.test(fragment)) {\n                                const mark = document.createElement('mark');\n                                mark.textContent = fragment;\n                                fragmentContainer.appendChild(mark);\n                            } else {\n                                fragmentContainer.appendChild(document.createTextNode(fragment));\n                            }\n                        });\n        \n                        parent.replaceChild(fragmentContainer, node);\n                    }\n                } else if (node.nodeType === Node.ELEMENT_NODE) {\n                    // Recurse into child nodes\n                    node.childNodes.forEach(walkNodes);\n                }\n            };\n        \n            // Start walking through the children of resultDetails\n            resultDetails.childNodes.forEach(walkNodes);\n        };\n        \n        if ( null !== searchInput && null !== resultDetails ) {\n            highlightMatches();\n        }\n});\n}\n\nif ('complete' === document.readyState) {\n    bcgovBlockThemePluginSearch();\n} else {\n    document.addEventListener('DOMContentLoaded',\n        bcgovBlockThemePluginSearch\n    );\n}\n","/**\n * Incentives and rebates in-page navigation generator DOM manipulation.\n */\nconst bcgovBlockThemePluginSideNav = () => {\n\t/*\n\t * SafarIE iOS requires window.requestAnimationFrame update.\n\t */\n\twindow.requestAnimationFrame(() => {\n\t\tconst detailsContainer = document.querySelector('#incentive-details-container');\n\t\tconsole.log('detailsContainer', detailsContainer)\n\t\tconst sideNav = document.querySelector('#incentive-side-nav');\n\t\tconsole.log('sideNav', sideNav)\n\n\t\tif (detailsContainer && sideNav) {\n\t\t\t// Clear the existing content of #incentive-side-nav\n\t\t\tsideNav.innerHTML = '';\n\n\t\t\t// Find all H2 elements inside the #incentive-details-container\n\t\t\tconst headings = detailsContainer.querySelectorAll('h2[id]');\n\n\t\t\t// Create a new list for navigation\n\t\t\tconst navListContainer = document.createElement('nav');\n\t\t\tnavListContainer.classList.add('side-nav', 'wp-block-navigation', 'is-vertical', 'wp-container-core-navigation-layout-2');\n\t\t\t\n\t\t\tconst navList = document.createElement('ul');\n\t\t\tnavList.classList.add('side-nav', 'wp-block-navigation', 'is-vertical', 'wp-block-navigation__container');\n\n\t\t\t// Loop through the H2 elements to create links\n\t\t\theadings.forEach(heading => {\n\t\t\t\tconst id = heading.id;\n\t\t\t\tconst text = heading.textContent.trim();\n\n\t\t\t\t// Create a list item\n\t\t\t\tconst listItem = document.createElement('li');\n\t\t\t\tlistItem.classList.add('wp-block-navigation-item', 'wp-block-navigation-link');\n\n\t\t\t\t// Create a link element\n\t\t\t\tconst link = document.createElement('a');\n\t\t\t\tlink.href = `#${id}`;\n\t\t\t\tlink.textContent = text;\n\t\t\t\tlink.classList.add('wp-block-navigation-item__content');\n\n\t\t\t\t// Append the link to the list item\n\t\t\t\tlistItem.appendChild(link);\n\n\t\t\t\t// Append the list item to the navigation list\n\t\t\t\tnavList.appendChild(listItem);\n\t\t\t});\n\n\t\t\t// Append the navigation list to the side navigation\n\t\t\tnavListContainer.appendChild(navList);\n\t\t\tsideNav.appendChild(navListContainer);\n\t\t}\n\n\t});\n}\n\nif ('complete' === document.readyState) {\n\tbcgovBlockThemePluginSideNav();\n} else {\n\tdocument.addEventListener('DOMContentLoaded',\n\t\tbcgovBlockThemePluginSideNav\n\t);\n}\n"],"names":["bcgovBlockThemePluginAccessibility","window","requestAnimationFrame","document","querySelector","getSiblings","elem","siblings","sibling","parentNode","firstChild","nodeType","push","nextSibling","querySelectorAll","forEach","label","ariaLabel","getAttribute","el","classList","contains","setAttribute","remove","readyState","addEventListener","bcgovBlockThemePluginDefnitions","links","definitionLinks","Array","from","filter","link","href","includes","handleClick","async","event","type","key","preventDefault","url","currentTarget","cachedData","sessionStorage","getItem","title","content","JSON","parse","displayContent","response","fetch","ok","Error","status","html","text","doc","DOMParser","parseFromString","titleElement","contentElement","innerText","innerHTML","dataToCache","setItem","stringify","error","console","handleKeypress","keycode","dialogContent","focus","showDialog","getElementById","showModal","length","dialog","createElement","id","className","body","appendChild","close","element","add","bcgovBlockThemePluginDomLoader","iconButtons","button","style","pointerEvents","iconButtonContainers","container","containerLink","outlineOffset","glossaryList","items","currentLetter","item","firstLetter","textContent","trim","charAt","toUpperCase","h2","h2Wrapper","insertBefore","bcgovBlockThemePluginDriverCategoryQuery","queryLoopDriverCardContainer","fetchDataAndReplaceLinks","page","perPage","localStorage","cachedTimestamp","existingData","timeDiff","Date","getTime","parseInt","processCategories","cacheError","message","_a","site","domain","newData","json","mergedData","concat","toString","data","categories","uniqueCategoryNames","Set","_embedded","categoryArray","category","categoryName","name","categoryImage","acf","category_image","has","replaceLinks","categoryDiv","separator","matchingCategory","find","imgElement","src","alt","replaceWith","opacity","bcgovBlockThemePluginLandingBanners","isHomeBanner","isLandingBanner","svgNamespace","svg","createElementNS","clipElementDefs","clipElementClipPath","clipElementPath","position","top","left","visibility","getElementsByTagName","insertAdjacentElement","bcgovBlockThemePluginSearch","searchInput","resultDetails","escapedTerms","input","regex","matches","match","exec","extractWordsAndPhrases","value","term","map","replace","RegExp","join","walkNodes","node","Node","TEXT_NODE","test","nodeValue","parent","fragments","split","fragmentContainer","createDocumentFragment","fragment","mark","createTextNode","replaceChild","ELEMENT_NODE","childNodes","bcgovBlockThemePluginSideNav","detailsContainer","log","sideNav","headings","navListContainer","navList","heading","listItem"],"mappings":"MAGMA,mCAAqC,KAI1CC,OAAOC,uBAAsB,KAG5B,GAAI,OAD2BC,SAASC,cAAc,6BACjB,CAC9B,MAAAC,YAAeC,OAEpB,MAAMC,SAAW,GACb,IAAAC,QAAUF,KAAKG,WAAWC,WAG9B,KAAOF,SACF,IAAMA,QAAQG,UAAYH,UAAYF,MACzCC,SAASK,KAAKJ,SAEX,OAASA,QAAQK,cACpBL,QAAUA,QAAQK,aAGb,OAAAN,QAAA,EAKSJ,SAASW,iBAAiB,kBAClCC,SAASC,QACX,MAAAT,SAAWF,YAAYW,OACvBC,UAAYD,MAAME,aAAa,cAC5BX,SAAAQ,SAASI,KACjB,GAAIA,GAAGC,UAAUC,SAAS,oBAAqB,CACjCF,GAAGf,cAAc,0BACzBkB,aAAa,aAAcL,UAChC,KAEFD,MAAMO,QAAM,GAEb,IACD,EAGE,aAAepB,SAASqB,gDAGlBrB,SAAAsB,iBAAiB,mBACzBzB,oCC/CF,MAAM0B,gCAAkC,KAIpCzB,OAAOC,uBAAsB,KACnB,MAAAyB,MAAQxB,SAASW,iBAAiB,2BAElCc,gBAAkBC,MAAMC,KAAKH,OAAOI,QAAQC,MACvCA,KAAKC,KAAKC,SAAS,iBAkCxBC,YAAcC,MAAOC,QAEnB,GAAA,UAAYA,MAAMC,MACjB,aAAeD,MAAMC,MAAQ,UAAYD,MAAME,IAClD,CACEF,MAAMG,iBACN,MAAMC,IAAMJ,MAAMK,cAAcxB,aAAa,QACvCyB,WAAa1C,OAAO2C,eAAeC,QAAQJ,KAEjD,GAAIE,WAAY,CACZ,MAAMG,MAAEA,MAAOC,QAAAA,SAAYC,KAAKC,MAAMN,YACtCO,eAAeJ,MAAOC,QAC1C,MACwB,IACM,MAAAI,eAAiBC,MAAMX,KAEzB,IAACU,SAASE,GACV,MAAM,IAAIC,MAAM,uBAAuBH,SAASI,UAG9C,MAAAC,WAAaL,SAASM,OAEtBC,KADS,IAAIzD,OAAO0D,WACPC,gBAAgBJ,KAAM,aAEnCK,aAAeH,IAAItD,cAAc,wBACjC0D,eAAiBJ,IAAItD,cAAc,kBAErC,IAACyD,eAAiBC,eAClB,MAAM,IAAIR,MACN,mDAIR,MAAMR,MAAQe,aAAaE,UACrBhB,QAAUe,eAAeE,UACzBC,YAAc,CAAEnB,YAAOC,iBAE7B9C,OAAO2C,eAAesB,QAAQzB,IAAKO,KAAKmB,UAAUF,cAClDf,eAAeJ,MAAOC,QACzB,OAAQqB,OACGC,QAAAD,MAAM,0BAA2BA,MAC5C,CAER,GAeCE,eAAkBjC,QAChB,UAAYA,MAAME,KAAO,KAAOF,MAAMkC,SACtCpC,YAAYE,MACf,EAeCa,eAAiB,CAACJ,MAAOC,WAC3B,MAAMyB,cAAgBrE,SAASC,cAC3B,2BAEUoE,cAAAR,UACV,oBAAsBlB,MAAQ,QAAUC,qBAE9ByB,cAAApE,cAAc,MAAMqE,OAAK,EAYrCC,WAAa,KACAvE,SAASwE,eAAe,UAChCC,WAAS,EAIhB,GAAAhD,gBAAgBiD,OAAS,EAAG,CACtB,MAAAC,OAAS3E,SAAS4E,cAAc,UACtCD,OAAOE,GAAK,SACZF,OAAOG,UAAY,SACZH,OAAAxD,aAAa,cAAc,GAC3BwD,OAAAxD,aAAa,YAAa,UACjCwD,OAAOd,UACH,kHACK7D,SAAA+E,KAAKC,YAAYL,QAEA3E,SAASwE,eAAe,gBAEhClD,iBAAiB,SAAS,KACxCqD,OAAOM,OAAK,IAGAxD,gBAAAb,SAASiB,OA5IH,IAACqD,QA6IdrD,KAAAZ,UAAUkE,IAAI,mBACdtD,KAAAV,aACD,aACA,6CAhJe+D,QAmJDrD,MAlJdP,iBAAiB,QAASU,aAC1BkD,QAAA5D,iBAAiB,WAAY6C,eAiJX,GAG7B,IAEJ,EAGD,aAAenE,SAASqB,6CAGfrB,SAAAsB,iBAAiB,mBACtBC,iCClLR,MAAM6D,+BAAiC,KAItCtF,OAAOC,uBAAuB,KAChBC,SAASC,cAAe,QAChCgB,UAAUkE,IAAK,kBAEd,MAAAE,YAAcrF,SAASW,iBAAkB,UAC1C0E,YAAYX,QACJW,YAAAzE,SAAW0E,SACjB,OAASA,OAAOvE,aAAc,UAC3BuE,OAAAnE,aAAc,WAAY,MACjCmE,OAAOC,MAAMC,cAAgB,OAC7B,IAKH,MAAMC,qBAAuBzF,SAASW,iBACrC,kCAEI8E,qBAAqBf,QACJe,qBAAA7E,SAAW8E,YACzB,MAAAC,cAAgBD,UAAUzF,cAAe,KAE9C,OAAS0F,eACPD,UAAUzE,UAAUC,SAAU,oBAEhCyE,cAAcJ,MAAMK,cAAgB,OACpC,IAKG,MAAAC,aAAe7F,SAASC,cAAc,wBAC5C,GAAI4F,aAAc,CACjB,MAAMC,MAAQpE,MAAMC,KAAKkE,aAAalF,iBAAiB,OACvD,IAAIoF,cAAgB,GAEpBD,MAAMlF,SAAgBoF,OACf,MAAAtC,aAAesC,KAAK/F,cAAc,MACxC,GAAIyD,aAAc,CACX,MACAuC,YADYvC,aAAawC,YAAYC,OACbC,OAAO,GAAGC,cAExC,GAAIJ,cAAgBF,cAAe,CAClBA,cAAAE,YAGV,MAAAK,GAAKtG,SAAS4E,cAAc,MAClC0B,GAAGJ,YAAcH,cAEX,MAAAQ,UAAYvG,SAAS4E,cAAc,MAC/B2B,UAAAtF,UAAUkE,IAAI,4BACxBoB,UAAUvB,YAAYsB,IAGTT,aAAAW,aAAaD,UAAWP,KACrC,CACD,IAEF,IACD,EAGG,aAAehG,SAASqB,4CAGnBrB,SAAAsB,iBAAiB,mBACzB8D,gCCtEF,MAAMqB,yCAA2C,KAI7C3G,OAAOC,uBAAsB,KACzB,MAAM2G,6BAA+B1G,SAASW,iBAC1C,sCAeEgG,yBAA2B1E,MAAO2E,KAAO,YACvC,IACA,MAAMC,QAAU,IACVrE,WAAa1C,OAAOgH,aAAapE,QAAQ,WACzCqE,gBACFjH,OAAOgH,aAAapE,QAAQ,oBAG1BsE,aAAexE,WAAaK,KAAKC,MAAMN,YAAc,GAE3D,GAAIA,YAAcuE,gBACV,IACA,MACME,UADc,IAAIC,MAAOC,UAEbC,SAASL,gBAAiB,IAG5C,GAAIE,SAFmB,MAKnB,YADAI,kBAAkBL,aAGzB,OAAQM,YAEGpD,QAAAD,MACJ,6BACAqD,WAAWC,QAGlB,CAGL,MAAMvE,eAAiBC,MACnB,GAAG,OAAAuE,UAAOC,WAAP,EAAAD,GAAaE,gDAAgDb,gBAAgBD,6BAGhF,IAAC5D,SAASE,GACV,MAAM,IAAIC,MAAM,uBAAuBH,SAASI,UAG9C,MAAAuE,cAAgB3E,SAAS4E,OACzBC,WAAab,aAAac,OAAOH,SAGvC7H,OAAOgH,aAAa/C,QAChB,UACAlB,KAAKmB,UAAU6D,aAIfF,QAAQjD,QAAUmC,eACZF,yBAAyBC,KAAO,GAG1CS,kBAAkBQ,YAGlB/H,OAAOgH,aAAa/C,QAChB,oBAAA,IACImD,MAAOC,UAAUY,WAE5B,OAAQ9D,OAEGC,QAAAD,MAAM,uBAAwBA,MAAMsD,QAE/C,GAWCF,kBAAqBW,OACvB,MAAMC,WAAa,GACbC,wBAA0BC,IAE3BH,KAAApH,SAASoF,gBACI,OAAAwB,GAAA,MAAAxB,UAAA,EAAAA,KAAMoC,gBAAN,EAAAZ,GAAkB,aAAc,IAExC5G,SAASyH,gBACGA,cAAAzH,SAAS0H,mBACnB,MAAMC,aAAyB,MAAVD,cAAU,EAAAA,SAAAE,KACzBC,cAAgB,OAAAjB,IAAU,MAAVc,cAAU,EAAAA,SAAAI,YAAVlB,IAAemB,eAGjCJ,cACiB,0BAAjBA,eACCL,oBAAoBU,IAAIL,gBAEzBL,oBAAoB/C,IAAIoD,cACxBN,WAAWxH,KAAK,CACZ+H,KAAMD,aACNG,IAAK,CACDC,eAAgBF,eAAiB,QAG5C,GACJ,GACJ,IAGLI,aAAaZ,WAAU,EAcrBY,aAAgBZ,aAClBjI,SACKW,iBAAiB,yBACjBC,SAASkI,cACA,MAAAtH,MAAQsH,YAAYnI,iBAAiB,KACxBmI,YAAYnI,iBAC3B,uCAGOC,SAASmI,WAAcA,UAAU3H,WAEtCI,MAAAZ,SAASiB,cACL,MAAA0G,aAAe1G,KAAK+B,UAAUuC,OAEpC,GAAI,0BAA4BoC,aAE5B,YADA1G,KAAKT,SAKT,MAAM4H,iBAAmBf,WAAWgB,MAC/BX,UAAaA,SAASE,OAASD,eAIpC,GAAIS,iBAAkB,CACZ,MAAAP,cACF,OAAAjB,GAAkB,MAAAwB,sBAAA,EAAAA,iBAAAN,UAAK,EAAAlB,GAAAmB,eAC3B,GAAIF,cAAe,CAET,MAAAS,WACFlJ,SAAS4E,cAAc,OAC3BsE,WAAWC,IAAMV,cACjBS,WAAWE,IAAMb,aACjBW,WAAWvG,MAAQ4F,aAGnB1G,KAAKwH,YAAYH,WACpB,CACJ,KAGLJ,YAAYvD,MAAM+D,QAAU,GAAA,GAC/B,EAGL5C,6BAA6BhC,kCAEhC,GACJ,EAGD,aAAe1E,SAASqB,sDAGfrB,SAAAsB,iBAAiB,mBACtBmF,0CCpMR,MAAM8C,oCAAsC,KAI3CzJ,OAAOC,uBAAuB,KAKvB,MAAAyJ,aAAexJ,SAASW,iBAAkB,sBAC1C8I,gBAAkBzJ,SAASW,iBAAkB,yBAE9C,GAAA6I,aAAa9E,QAAU+E,gBAAgB/E,OAAS,CACpD,MAAMgF,aAAe,6BACfC,IAAM3J,SAAS4J,gBAAiBF,aAAc,OAC9CG,gBAAkB7J,SAAS4J,gBAChCF,aACA,QAEKI,oBAAsB9J,SAAS4J,gBACpCF,aACA,YAEmBI,oBAAA3I,aAAc,KAAM,WACxC,MAAM4I,gBAAkB/J,SAAS4J,gBAChCF,aACA,QAEeK,gBAAA5I,aACf,IACA,iGAEmB2I,oBAAA3I,aAAc,YAAa,eAG/CwI,IAAI3E,YAAa6E,iBACjBA,gBAAgB7E,YAAa8E,qBAC7BA,oBAAoB9E,YAAa+E,iBAG7BJ,IAAAxI,aAAc,QAASuI,cACvBC,IAAAxI,aAAc,cAAe,gCAC7BwI,IAAAxI,aAAc,UAAW,OACzBwI,IAAAxI,aAAc,QAAS,OACvBwI,IAAAxI,aAAc,SAAU,OACxBwI,IAAAxI,aAAc,UAAW,eACzBwI,IAAAxI,aAAc,sBAAuB,QACzCwI,IAAIpE,MAAMyE,SAAW,WACrBL,IAAIpE,MAAM0E,IAAM,IAChBN,IAAIpE,MAAM2E,KAAO,IACjBP,IAAIpE,MAAM4E,WAAa,UAGVnK,SAASoK,qBAAsB,QAAU,GACjDC,sBAAuB,aAAcV,IAC1C,MAIE,aAAe3J,SAASqB,iDAGnBrB,SAAAsB,iBAAiB,mBACzBiI,qCC/DF,MAAMe,4BAA8B,KAIhCxK,OAAOC,uBAAsB,KACnB,MAAAwK,YAAcvK,SAASC,cAAc,2BACrCuK,cAAgBxK,SAASC,cAAc,mBAoDxC,OAASsK,aAAe,OAASC,eAvCb,MACf,MAIAC,aAhBqB,CAACC,QAE5B,MAAMC,MAAQ,uBACRC,QAAU,GACZ,IAAAC,MACJ,KAAuC,QAA/BA,MAAQF,MAAMG,KAAKJ,SACvBE,QAAQnK,KAAKoK,MAAM,IAAMA,MAAM,IAE5B,OAAAD,OAAA,EAKaG,CADDR,YAAYS,MAAM7E,QAEHvE,QAAeqJ,MAAAA,KAAKvG,QAAU,IAE7BwG,KAAID,MAAQA,KAAKE,QAAQ,sBAAuB,UAC7ER,MAAQ,IAAIS,OAAO,IAAIX,aAAaY,KAAK,QAAS,MAElDC,UAAaC,OACX,GAAAA,KAAK/K,WAAagL,KAAKC,WACvB,GAAId,MAAMe,KAAKH,KAAKI,WAAY,CAC5B,MAAMC,OAASL,KAAKjL,WAGduL,UAAYN,KAAKI,UAAUG,MAAMnB,OACjCoB,kBAAoB/L,SAASgM,yBAEzBH,UAAAjL,SAASqL,WACX,GAAAtB,MAAMe,KAAKO,UAAW,CAChB,MAAAC,KAAOlM,SAAS4E,cAAc,QACpCsH,KAAKhG,YAAc+F,SACnBF,kBAAkB/G,YAAYkH,KAC9D,MACgCH,kBAAkB/G,YAAYhF,SAASmM,eAAeF,UACzD,IAGEL,OAAAQ,aAAaL,kBAAmBR,KAC1C,OACMA,KAAK/K,WAAagL,KAAKa,cAEzBd,KAAAe,WAAW1L,QAAQ0K,UAC3B,EAISd,cAAA8B,WAAW1L,QAAQ0K,UAAS,IAK7C,GACR,EAGG,aAAetL,SAASqB,yCAGfrB,SAAAsB,iBAAiB,mBACtBgJ,6BCpER,MAAMiC,6BAA+B,KAIpCzM,OAAOC,uBAAsB,KACtB,MAAAyM,iBAAmBxM,SAASC,cAAc,gCACxCiE,QAAAuI,IAAI,mBAAoBD,kBAC1B,MAAAE,QAAU1M,SAASC,cAAc,uBAGvC,GAFQiE,QAAAuI,IAAI,UAAWC,SAEnBF,kBAAoBE,QAAS,CAEhCA,QAAQ7I,UAAY,GAGd,MAAA8I,SAAWH,iBAAiB7L,iBAAiB,UAG7CiM,iBAAmB5M,SAAS4E,cAAc,OAChDgI,iBAAiB3L,UAAUkE,IAAI,WAAY,sBAAuB,cAAe,yCAE3E,MAAA0H,QAAU7M,SAAS4E,cAAc,MACvCiI,QAAQ5L,UAAUkE,IAAI,WAAY,sBAAuB,cAAe,kCAGxEwH,SAAS/L,SAAmBkM,UAC3B,MAAMjI,GAAKiI,QAAQjI,GACbvB,KAAOwJ,QAAQ5G,YAAYC,OAG3B4G,SAAW/M,SAAS4E,cAAc,MAC/BmI,SAAA9L,UAAUkE,IAAI,2BAA4B,4BAG7C,MAAAtD,KAAO7B,SAAS4E,cAAc,KAC/B/C,KAAAC,KAAO,IAAI+C,KAChBhD,KAAKqE,YAAc5C,KACdzB,KAAAZ,UAAUkE,IAAI,qCAGnB4H,SAAS/H,YAAYnD,MAGrBgL,QAAQ7H,YAAY+H,SAAQ,IAI7BH,iBAAiB5H,YAAY6H,SAC7BH,QAAQ1H,YAAY4H,iBACpB,IAED,EAGE,aAAe5M,SAASqB,0CAGlBrB,SAAAsB,iBAAiB,mBACzBiL"}