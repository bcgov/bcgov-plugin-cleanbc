function qs(e,t=document){if(!e)throw new Error("A selector argument is required for the qs function");return t.querySelector(e)}function qsa(e,t=document){if(!e)throw new Error("A selector argument is required for the qsa function");return[...t.querySelectorAll(e)]}const bcgovBlockThemePlugin$5_initFrontendAccessibility=function(){requestAnimationFrame((()=>{if(qs(".actions-accordion-header")){const getSiblings=function(e){const t=[];let n=e.parentNode.firstChild;for(;n;)1===n.nodeType&&n!==e&&t.push(n),n=n.nextSibling;return t};qsa(".labelInjector").forEach((e=>{const t=getSiblings(e),n=e.getAttribute("data-label");t.forEach((e=>{if(e.classList.contains("wp-block-buttons")){qs(".wp-block-button__link",e).setAttribute("aria-label",n)}})),e.remove()}))}}))};"complete"===document.readyState?bcgovBlockThemePlugin$5_initFrontendAccessibility():document.addEventListener("DOMContentLoaded",bcgovBlockThemePlugin$5_initFrontendAccessibility());const bcgovBlockThemePlugin$4_initFrontendDomLoader=function(){requestAnimationFrame((()=>{const e=qsa("a.icon");e.length&&e.forEach((e=>{null===e.getAttribute("href")&&(e.setAttribute("tabindex","-1"),e.style.pointerEvents="none")}));const t=qsa(".wp-block-button.is-style-icon");t.length&&t.forEach((e=>{const t=qs("a",e);null===t||e.classList.contains("has-size-large")||(t.style.outlineOffset="1rem")}))}))};"complete"===document.readyState?bcgovBlockThemePlugin$4_initFrontendDomLoader():document.addEventListener("DOMContentLoaded",bcgovBlockThemePlugin$4_initFrontendDomLoader()),function addSafeEventListener(e,t,n,o){!e||"function"!=typeof e.addEventListener&&"function"!=typeof e.on||("function"==typeof e.addEventListener?e.addEventListener(t,n,o):"function"==typeof e.on&&e.on(t,n))}(document,"scroll",(()=>{}));const bcgovBlockThemePlugin$3_initFrontendDriverCategoryQuery=function(){requestAnimationFrame((()=>{function processCategories(e){const t=[],n=new Set;e.forEach((e=>{var o;((null==(o=null==e?void 0:e._embedded)?void 0:o["wp:term"])||[]).forEach((e=>{e.forEach((e=>{var o;const a=null==e?void 0:e.name,r=null==(o=null==e?void 0:e.acf)?void 0:o.category_image;a&&"Actions we are taking"!==a&&!n.has(a)&&(n.add(a),t.push({name:a,acf:{category_image:r||null}}))}))}))})),function replaceLinks(e){document.querySelectorAll("div.taxonomy-category").forEach((t=>{const n=t.querySelectorAll("a");t.querySelectorAll("span.wp-block-post-terms__separator").forEach((e=>e.remove())),n.forEach((t=>{var n;const o=t.innerText.trim();if("Actions we are taking"===o)return void t.remove();const a=e.find((e=>e.name===o));if(a){const e=null==(n=null==a?void 0:a.acf)?void 0:n.category_image;if(e){const n=document.createElement("img");n.src=e,n.alt=o,n.title=o,t.replaceWith(n)}}})),t.style.opacity="1"}))}(t)}document.querySelectorAll(".wp-block-query.vue-card-container").length&&async function fetchDataAndReplaceLinks(e=1){try{const n=100,o=localStorage.getItem("apiData"),a=localStorage.getItem("apiDataTimestamp"),r=o?JSON.parse(o):[];if(o&&a)try{const e=(new Date).getTime()-parseInt(a,10);if(e<864e5)return void processCategories(r)}catch(t){console.error("Error parsing cached data:",t.message)}const c=await fetch(`https://cleanbc.gov.bc.ca/wp-json/wp/v2/project?_embed&per_page=${n}&page=${e}&_category_image=true`);if(!c.ok)throw new Error(`HTTP error! Status: ${c.status}`);const i=await c.json(),s=r.concat(i);localStorage.setItem("apiData",JSON.stringify(s)),i.length>=n&&await fetchDataAndReplaceLinks(e+1),processCategories(s),localStorage.setItem("apiDataTimestamp",(new Date).getTime().toString())}catch(n){console.error("Error fetching data:",n.message)}}()}))};"complete"===document.readyState?bcgovBlockThemePlugin$3_initFrontendDriverCategoryQuery():document.addEventListener("DOMContentLoaded",bcgovBlockThemePlugin$3_initFrontendDriverCategoryQuery());const bcgovBlockThemePlugin$2_initFrontendLandingBanners=function(){requestAnimationFrame((()=>{const e=qsa(".home-cover-banner"),t=qsa(".landing-cover-banner");if(e.length||t.length){const e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg"),n=document.createElementNS(e,"defs"),o=document.createElementNS(e,"clipPath");o.setAttribute("id","svgPath");const a=document.createElementNS(e,"path");a.setAttribute("d","M0,77.2v-24.7c0,-8.6,6.8,-15.6,15.3,-16l901.5,-36.6c44.3,-1.7,81.5,33.1,83.2,77.5l-1000,-0.2z"),o.setAttribute("transform","scale(1.44)"),t.appendChild(n),n.appendChild(o),o.appendChild(a),t.setAttribute("xmlns",e),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("version","1.1"),t.setAttribute("width","100"),t.setAttribute("height","100"),t.setAttribute("viewBox","0 0 100 100"),t.setAttribute("preserveAspectRatio","none"),t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.visibility="visible";document.getElementsByTagName("body")[0].insertAdjacentElement("afterbegin",t)}}))};"complete"===document.readyState?bcgovBlockThemePlugin$2_initFrontendLandingBanners():document.addEventListener("DOMContentLoaded",bcgovBlockThemePlugin$2_initFrontendLandingBanners());const bcgovBlockThemePlugin$1_initFrontendSearch=function(){requestAnimationFrame((()=>{const e=qs(".toggle-search-btn a"),t=qs("#search-field-container");if(e&&t){const n=t.previousElementSibling,o=qs("input",t),a=qs("button",t);t&&n&&n.parentNode.insertBefore(t,n),e.addEventListener("click",(function(e){e.preventDefault(),t&&(t.classList.contains("hidden")?(t.classList.remove("hidden"),o&&o.focus()):t.classList.add("hidden"))})),e.addEventListener("keydown",(t=>{"Space"!==t.code&&"Enter"!==t.code||(t.preventDefault(),e.click())})),t&&(o.addEventListener("blur",(function(t){t.preventDefault(),requestAnimationFrame((()=>{a!==document.activeElement&&e!==document.activeElement&&(e.focus(),e.click())}))})),a.addEventListener("blur",(function(t){t.preventDefault(),requestAnimationFrame((()=>{o!==document.activeElement&&e!==document.activeElement&&(e.focus(),e.click())}))})))}}))};"complete"===document.readyState?bcgovBlockThemePlugin$1_initFrontendSearch():document.addEventListener("DOMContentLoaded",bcgovBlockThemePlugin$1_initFrontendSearch());const bcgovBlockThemePlugin_initFrontend=function(){requestAnimationFrame((()=>{document.querySelector("body")}))};"complete"===document.readyState?bcgovBlockThemePlugin_initFrontend():document.addEventListener("DOMContentLoaded",bcgovBlockThemePlugin_initFrontend());
