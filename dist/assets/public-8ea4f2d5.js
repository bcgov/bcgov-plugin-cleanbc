const bcgovBlockThemePluginAccessibility=()=>{window.requestAnimationFrame((()=>{if(null!==document.querySelector(".actions-accordion-header")){const getSiblings=elem=>{const siblings=[];let sibling=elem.parentNode.firstChild;for(;sibling;)1===sibling.nodeType&&sibling!==elem&&siblings.push(sibling),null!==sibling.nextSibling&&(sibling=sibling.nextSibling);return siblings};document.querySelectorAll(".labelInjector").forEach((label=>{const siblings=getSiblings(label),ariaLabel=label.getAttribute("data-label");siblings.forEach((el=>{if(el.classList.contains("wp-block-buttons")){el.querySelector(".wp-block-button__link").setAttribute("aria-label",ariaLabel)}})),label.remove()}))}const breadcrumbNav=document.querySelector("#breadcrumb-nav");if(null!==breadcrumbNav){breadcrumbNav.setAttribute("role","navigation"),breadcrumbNav.setAttribute("aria-label","Breadcrumb");const aioseoBreadcrumb=breadcrumbNav.querySelector(".aioseo-breadcrumbs"),aioseoBreadcrumbItems=aioseoBreadcrumb.querySelectorAll(".aioseo-breadcrumb"),aioseoBreadcrumbSeparators=aioseoBreadcrumb.querySelectorAll(".aioseo-breadcrumb-separator");null!==aioseoBreadcrumb&&null!==aioseoBreadcrumbItems&&(aioseoBreadcrumb.setAttribute("role","list"),aioseoBreadcrumbItems.forEach(((item,index)=>{item.setAttribute("role","listitem"),index===aioseoBreadcrumbItems.length-1&&(item.setAttribute("role","link"),item.setAttribute("aria-current","page"))}))),null!==aioseoBreadcrumbSeparators&&aioseoBreadcrumbSeparators.forEach((separator=>{separator.setAttribute("aria-hidden","true")}))}const detailsWithNumbersContainers=document.querySelectorAll(".detail-with-number-container");if(detailsWithNumbersContainers.length>0){const gridGroupDiv=document.createElement("div");gridGroupDiv.setAttribute("role","grid"),gridGroupDiv.setAttribute("data-wrap-cols",!0),gridGroupDiv.setAttribute("data-wrap-rows",!0);const firstDetailContainer=detailsWithNumbersContainers[0];firstDetailContainer.parentNode.insertBefore(gridGroupDiv,firstDetailContainer),detailsWithNumbersContainers.forEach((detailContainer=>{gridGroupDiv.appendChild(detailContainer)}));let determinedHeadingLevel=null;detailsWithNumbersContainers.forEach(((detailContainer,index)=>{detailContainer.setAttribute("role","row");const headlineCell=detailContainer.querySelector(".wp-block-column:nth-of-type(1)"),detailCell=detailContainer.querySelector(".wp-block-column:nth-of-type(2)"),finalDetailCell=(headlineCell?headlineCell.querySelectorAll(".wp-block-heading"):[]).length>0&&detailCell?detailCell:headlineCell;if(finalDetailCell&&(finalDetailCell.setAttribute("role","gridcell"),finalDetailCell.setAttribute("tabindex","0"),headlineCell)){const headlines2=headlineCell.querySelectorAll(".wp-block-heading");let concatenatedHeadlineText="";if(headlines2.forEach((headline=>{concatenatedHeadlineText+=headline.innerText+" ",headline.setAttribute("aria-hidden",!0)})),concatenatedHeadlineText.trim()){if(0===index){let nearestHeading=null,currentElement=detailContainer.previousElementSibling;for(;currentElement&&!nearestHeading;){if(currentElement.classList.contains("wp-block-heading")){nearestHeading=currentElement;break}const headings=currentElement.querySelectorAll(".wp-block-heading");if(headings.length>0){nearestHeading=headings[headings.length-1];break}currentElement=currentElement.previousElementSibling}let parentElement=detailContainer.parentElement;for(;!nearestHeading&&parentElement;){for(currentElement=parentElement.previousElementSibling;currentElement;){if(currentElement.classList.contains("wp-block-heading")){nearestHeading=currentElement;break}const headings=currentElement.querySelectorAll(".wp-block-heading");if(headings.length>0){nearestHeading=headings[headings.length-1];break}currentElement=currentElement.previousElementSibling}parentElement=parentElement.parentElement}if(nearestHeading){const nearestHeadingTagName=nearestHeading.tagName.toLowerCase();determinedHeadingLevel=parseInt(nearestHeadingTagName.replace("h",""))+1,determinedHeadingLevel>6&&(determinedHeadingLevel=6)}else determinedHeadingLevel=2}const newHeading=document.createElement(`h${determinedHeadingLevel}`);newHeading.innerText=concatenatedHeadlineText.trim(),newHeading.classList.add("sr-only"),finalDetailCell.insertBefore(newHeading,finalDetailCell.firstChild)}}if(0===index){let nearestHeading=null,currentElement=detailContainer.previousElementSibling;for(;currentElement&&!nearestHeading;){if(currentElement.classList.contains("wp-block-heading")){nearestHeading=currentElement;break}const headings=currentElement.querySelectorAll(".wp-block-heading");if(headings.length>0){nearestHeading=headings[headings.length-1];break}currentElement=currentElement.previousElementSibling}let parentElement=detailContainer.parentElement;for(;!nearestHeading&&parentElement;){for(currentElement=parentElement.previousElementSibling;currentElement;){if(currentElement.classList.contains("wp-block-heading")){nearestHeading=currentElement;break}const headings=currentElement.querySelectorAll(".wp-block-heading");if(headings.length>0){nearestHeading=headings[headings.length-1];break}currentElement=currentElement.previousElementSibling}parentElement=parentElement.parentElement}if(nearestHeading){let headingId=nearestHeading.getAttribute("id");headingId||(headingId=`grid-${Date.now()}`,nearestHeading.setAttribute("id",headingId)),gridGroupDiv.setAttribute("aria-labelledby",headingId)}}})),gridGroupDiv.addEventListener("keydown",(event=>{const activeElement=document.activeElement;if("gridcell"===activeElement.getAttribute("role")){const row=activeElement.parentElement,rows=Array.from(gridGroupDiv.querySelectorAll('[role="row"]')),cells=Array.from(row.querySelectorAll('[role="gridcell"]')),rowIndex=rows.indexOf(row),cellIndex=cells.indexOf(activeElement);switch(event.key){case"ArrowRight":case"ArrowDown":if(rowIndex<rows.length-1){rows[rowIndex+1].querySelectorAll('[role="gridcell"]')[cellIndex].focus()}break;case"ArrowLeft":case"ArrowUp":if(rowIndex>0){rows[rowIndex-1].querySelectorAll('[role="gridcell"]')[cellIndex].focus()}break;case"PageDown":if(rowIndex<rows.length-1){rows[Math.min(rowIndex+3,rows.length-1)].querySelectorAll('[role="gridcell"]')[cellIndex].focus()}event.preventDefault();break;case"PageUp":if(rowIndex>0){rows[Math.max(rowIndex-3,0)].querySelectorAll('[role="gridcell"]')[cellIndex].focus()}event.preventDefault();break;case"Home":rows[0].querySelector('[role="gridcell"]').focus(),event.preventDefault();break;case"End":rows[rows.length-1].querySelector('[role="gridcell"]:last-child').focus(),event.preventDefault();break}}}))}document.querySelector(".back-to-top").addEventListener("click",(event=>{event.preventDefault(),window.scrollTo({top:0,behavior:"smooth"});const checkIfScrolledToTop=setInterval((()=>{0===window.scrollY&&(clearInterval(checkIfScrolledToTop),document.body.setAttribute("tabindex","-1"),document.body.focus({preventScroll:!0}))}),50)}))}))};"complete"===document.readyState?bcgovBlockThemePluginAccessibility():document.addEventListener("DOMContentLoaded",bcgovBlockThemePluginAccessibility);const bcgovBlockThemePluginDefnitions=()=>{window.requestAnimationFrame((()=>{const links=document.querySelectorAll("a:not(#postFilterApp a)"),definitionLinks=Array.from(links).filter((link=>link.href.includes("definitions"))),handleClick=async event=>{if("click"===event.type||"keypress"===event.type&&"Enter"===event.key){event.preventDefault();const url=event.currentTarget.getAttribute("href"),cachedData=window.sessionStorage.getItem(url);if(cachedData){const{title:title,content:content}=JSON.parse(cachedData);displayContent(title,content)}else try{const response=await fetch(url);if(!response.ok)throw new Error(`HTTP error! Status: ${response.status}`);const html=await response.text(),doc=(new window.DOMParser).parseFromString(html,"text/html"),titleElement=doc.querySelector(".wp-block-post-title"),contentElement=doc.querySelector(".entry-content");if(!titleElement||!contentElement)throw new Error("Required content not found in the fetched HTML.");const title=titleElement.innerText,content=contentElement.innerHTML,dataToCache={title:title,content:content};window.sessionStorage.setItem(url,JSON.stringify(dataToCache)),displayContent(title,content)}catch(error){console.error("Error fetching content:",error)}}},handleKeypress=event=>{"Enter"!==event.key&&13!==event.keycode||handleClick(event)},displayContent=(title,content)=>{const dialogContent=document.querySelector("#dialog .dialog-content");dialogContent.innerHTML='<h2 tabindex="0">'+title+"</h2>"+content,showDialog(),dialogContent.querySelector("h2").focus()},showDialog=()=>{document.getElementById("dialog").showModal()};if(definitionLinks.length>0){const dialog=document.createElement("dialog");dialog.id="dialog",dialog.className="dialog",dialog.setAttribute("aria-modal",!0),dialog.setAttribute("aria-live","polite"),dialog.innerHTML='<div class="dialog-content"></div><button id="close-dialog" aria-label="closes defintion dialog">Close</button>',document.body.appendChild(dialog);document.getElementById("close-dialog").addEventListener("click",(()=>{dialog.close()})),definitionLinks.forEach((link=>{link.classList.add("icon-definition"),link.setAttribute("aria-label","opens definition dialog for this concept");const linkText=link.textContent;if(linkText&&linkText.trim().length>0){const words=linkText.trim().split(" "),lastWord=words.pop(),restOfText=words.join(" "),span=document.createElement("span");span.classList.add("last-word","no-wrap"),span.textContent=lastWord,link.innerHTML=`${restOfText} `,link.appendChild(span)}var element;(element=link).addEventListener("click",handleClick),element.addEventListener("keypress",handleKeypress)}))}}))};"complete"===document.readyState?bcgovBlockThemePluginDefnitions():document.addEventListener("DOMContentLoaded",bcgovBlockThemePluginDefnitions);const bcgovBlockThemePluginDomLoader=()=>{window.requestAnimationFrame((()=>{document.querySelector("body").classList.add("cleanbc-plugin");const iconButtons=document.querySelectorAll("a.icon");iconButtons.length&&iconButtons.forEach((button=>{null===button.getAttribute("href")&&(button.setAttribute("tabindex","-1"),button.style.pointerEvents="none")}));const iconButtonContainers=document.querySelectorAll(".wp-block-button.is-style-icon");iconButtonContainers.length&&iconButtonContainers.forEach((container=>{const containerLink=container.querySelector("a");null===containerLink||container.classList.contains("has-size-large")||(containerLink.style.outlineOffset="1rem")}));const glossaryList=document.querySelector(".glossary-results ul");if(glossaryList){const items=Array.from(glossaryList.querySelectorAll("li"));let currentLetter="";items.forEach((item=>{const titleElement=item.querySelector("h3");if(titleElement){const firstLetter=titleElement.textContent.trim().charAt(0).toUpperCase();if(firstLetter!==currentLetter){currentLetter=firstLetter;const h2=document.createElement("h2");h2.textContent=currentLetter;const h2Wrapper=document.createElement("li");h2Wrapper.classList.add("glossary-letter-headline"),h2Wrapper.appendChild(h2),glossaryList.insertBefore(h2Wrapper,item)}}}))}const searchFieldContainer=document.querySelector("#search-field-container"),toggleSearchBtn=document.querySelector(".toggle-search-btn a");searchFieldContainer&&toggleSearchBtn&&searchFieldContainer.addEventListener("keydown",(event=>{"Escape"===event.code&&(searchFieldContainer.blur(),toggleSearchBtn.focus(),searchFieldContainer.classList.add("hidden"))}));(()=>{const observer=new MutationObserver(((mutationsList,observer2)=>{const externalLinks=document.querySelectorAll("a.external:not(#postFilterApp a, #pqeasResults a, #contractorFilterApp a, .vue-card-content a)");externalLinks.length>0&&(observer2.disconnect(),externalLinks.forEach((link=>{if(link.href.startsWith("mailto:")||link.href.startsWith("tel:")){if(link.href.startsWith("mailto:")){const email=link.href.slice(7);link.innerHTML=link.innerHTML.replace(email,email.replace(/@/g,"&#8203;@").replace(/\./g,"&#8203;."))}return}const svg=link.querySelector("svg");if(svg){const linkText=link.textContent;if(linkText&&linkText.trim().length>0){const words=linkText.trim().split(" "),lastWord=words.pop(),restOfText=words.join(" "),span=document.createElement("span");span.classList.add("last-word","no-wrap"),span.textContent=lastWord,span.appendChild(svg),link.innerHTML=`${restOfText} `,link.appendChild(span)}}})))}));observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0}),setTimeout((()=>observer.disconnect()),1e4)})()}))};"complete"===document.readyState?bcgovBlockThemePluginDomLoader():document.addEventListener("DOMContentLoaded",bcgovBlockThemePluginDomLoader);const bcgovBlockThemePluginDriverCategoryQuery=()=>{window.requestAnimationFrame((()=>{const queryLoopDriverCardContainer=document.querySelectorAll(".wp-block-query.vue-card-container"),fetchDataAndReplaceLinks=async(page=1)=>{var _a;try{const perPage=100,cachedData=window.localStorage.getItem("apiData"),cachedTimestamp=window.localStorage.getItem("apiDataTimestamp"),existingData=cachedData?JSON.parse(cachedData):[];if(cachedData&&cachedTimestamp)try{const timeDiff=(new Date).getTime()-parseInt(cachedTimestamp,10);if(timeDiff<864e5)return void processCategories(existingData)}catch(cacheError){console.error("Error parsing cached data:",cacheError.message)}const response=await fetch(`${null==(_a=window.site)?void 0:_a.domain}/wp-json/wp/v2/project?_embed&per_page=${perPage}&page=${page}&_category_image=true`);if(!response.ok)throw new Error(`HTTP error! Status: ${response.status}`);const newData=await response.json(),mergedData=existingData.concat(newData);window.localStorage.setItem("apiData",JSON.stringify(mergedData)),newData.length>=perPage&&await fetchDataAndReplaceLinks(page+1),processCategories(mergedData),window.localStorage.setItem("apiDataTimestamp",(new Date).getTime().toString())}catch(error){console.error("Error fetching data:",error.message)}},processCategories=data=>{const categories=[],uniqueCategoryNames=new Set;data.forEach((item=>{var _a;((null==(_a=null==item?void 0:item._embedded)?void 0:_a["wp:term"])||[]).forEach((categoryArray=>{categoryArray.forEach((category=>{var _a2;const categoryName=null==category?void 0:category.name,categoryImage=null==(_a2=null==category?void 0:category.acf)?void 0:_a2.category_image;categoryName&&"Actions we are taking"!==categoryName&&!uniqueCategoryNames.has(categoryName)&&(uniqueCategoryNames.add(categoryName),categories.push({name:categoryName,acf:{category_image:categoryImage||null}}))}))}))})),replaceLinks(categories)},replaceLinks=categories=>{document.querySelectorAll("div.taxonomy-category").forEach((categoryDiv=>{const links=categoryDiv.querySelectorAll("a");categoryDiv.querySelectorAll("span.wp-block-post-terms__separator").forEach((separator=>separator.remove())),links.forEach((link=>{var _a;const categoryName=link.innerText.trim();if("Actions we are taking"===categoryName)return void link.remove();const matchingCategory=categories.find((category=>category.name===categoryName));if(matchingCategory){const categoryImage=null==(_a=null==matchingCategory?void 0:matchingCategory.acf)?void 0:_a.category_image;if(categoryImage){const imgElement=document.createElement("img");imgElement.src=categoryImage,imgElement.alt=categoryName,imgElement.title=categoryName,link.replaceWith(imgElement)}}})),categoryDiv.style.opacity="1"}))};queryLoopDriverCardContainer.length&&fetchDataAndReplaceLinks()}))};"complete"===document.readyState?bcgovBlockThemePluginDriverCategoryQuery():document.addEventListener("DOMContentLoaded",bcgovBlockThemePluginDriverCategoryQuery);const bcgovBlockThemePluginLandingBanners=()=>{window.requestAnimationFrame((()=>{const isHomeBanner=document.querySelectorAll(".home-cover-banner"),isLandingBanner=document.querySelectorAll(".landing-cover-banner");if(isHomeBanner.length||isLandingBanner.length){const svgNamespace="http://www.w3.org/2000/svg",svg=document.createElementNS(svgNamespace,"svg"),clipElementDefs=document.createElementNS(svgNamespace,"defs"),clipElementClipPath=document.createElementNS(svgNamespace,"clipPath");clipElementClipPath.setAttribute("id","svgPath");const clipElementPath=document.createElementNS(svgNamespace,"path");clipElementPath.setAttribute("d","M0,77.2v-24.7c0,-8.6,6.8,-15.6,15.3,-16l901.5,-36.6c44.3,-1.7,81.5,33.1,83.2,77.5l-1000,-0.2z"),clipElementClipPath.setAttribute("transform","scale(1.44)"),svg.appendChild(clipElementDefs),clipElementDefs.appendChild(clipElementClipPath),clipElementClipPath.appendChild(clipElementPath),svg.setAttribute("xmlns",svgNamespace),svg.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),svg.setAttribute("version","1.1"),svg.setAttribute("width","100"),svg.setAttribute("height","100"),svg.setAttribute("viewBox","0 0 100 100"),svg.setAttribute("preserveAspectRatio","none"),svg.style.position="absolute",svg.style.top="0",svg.style.left="0",svg.style.visibility="visible";document.getElementsByTagName("body")[0].insertAdjacentElement("afterbegin",svg)}}))};"complete"===document.readyState?bcgovBlockThemePluginLandingBanners():document.addEventListener("DOMContentLoaded",bcgovBlockThemePluginLandingBanners);const domNavReady=()=>{window.requestAnimationFrame((()=>{const doBoundsCheck=targetEl=>{const container=targetEl,childContainer=container.querySelector("ul"),subChildContainer=container.querySelector(".wp-block-navigation__submenu-container .wp-block-navigation__submenu-container");let bounding=null;childContainer&&(bounding=childContainer.getBoundingClientRect());const windowWidth=window.innerWidth||document.documentElement.clientWidth;bounding&&(subChildContainer&&(subChildContainer.style.top="0.85rem"),bounding.right>windowWidth&&childContainer&&(childContainer.classList.add("is-offscreen"),childContainer.style.left=`calc(4px - ${childContainer.parentNode.parentNode.offsetWidth}px)`,childContainer.style.right="auto",childContainer.style.position="absolute"))},navContainer=document.querySelector("header nav"),topLevelMenuItems=document.querySelectorAll(".wp-block-navigation__container > .wp-block-navigation-item > .wp-block-navigation-item__content"),topLevelToggles=document.querySelectorAll(".wp-block-navigation__container > .wp-block-navigation-submenu > .wp-block-navigation-submenu__toggle"),submenuContainers=document.querySelectorAll(".wp-block-navigation-submenu"),nestedToggles=document.querySelectorAll("ul ul .wp-block-navigation-submenu__toggle");if(navContainer){navContainer.querySelectorAll("ul").forEach((el=>{const formattedName=el.parentElement.querySelector("a").text.trim().toLowerCase().replace(/\s+/g,"_");el.setAttribute("id",`id_${formattedName}_menu`),"NAV"===el.parentElement.tagName?(el.setAttribute("aria-label","Main menu"),el.setAttribute("role","menubar")):(el.setAttribute("role","menu"),el.setAttribute("tabindex",-1),el.setAttribute("aria-label",el.parentElement.querySelector("a").text))}));navContainer.querySelectorAll("li").forEach((el=>{el.querySelector("ul")?el.setAttribute("role","group"):el.setAttribute("role","none")}));navContainer.querySelectorAll("a").forEach(((el,index)=>{el.setAttribute("tabindex",-1),0===index&&el.setAttribute("tabindex",0),el.setAttribute("role","menuitem")}));navContainer.querySelectorAll("button").forEach((el=>{const formattedName=el.parentElement.querySelector("a").text.trim().toLowerCase().replace(/\s+/g,"_");el.setAttribute("role","menuitem"),el.setAttribute("aria-controls",`id_${formattedName}_menu`),el.setAttribute("tabindex",-1),el.parentElement.querySelector("ul")&&el.setAttribute("aria-haspopup","true")}))}topLevelToggles&&topLevelMenuItems&&(topLevelMenuItems.forEach((menuItem=>{menuItem.addEventListener("focus",(event=>{topLevelToggles.forEach((other=>{other.getAttribute("aria-expanded")&&other.setAttribute("aria-expanded","false")})),nestedToggles&&nestedToggles.forEach((sub=>{sub.setAttribute("aria-expanded","false")})),event.stopImmediatePropagation()}),!0)})),topLevelToggles.forEach((toggle=>{toggle.addEventListener("click",(event=>{event.stopImmediatePropagation(),event.preventDefault();"true"===toggle.getAttribute("aria-expanded")?toggle.setAttribute("aria-expanded","false"):toggle.setAttribute("aria-expanded","true")}),!0),toggle.addEventListener("focus",(event=>{topLevelToggles.forEach((other=>{other.getAttribute("aria-expanded")&&other.setAttribute("aria-expanded","false")})),nestedToggles&&nestedToggles.forEach((sub=>{sub.setAttribute("aria-expanded","false")})),event.stopImmediatePropagation()}),!0)}))),submenuContainers&&submenuContainers.forEach((submenu=>{submenu.addEventListener("focusout",(event=>{const navContainerFocus=document.querySelector("header nav");navContainerFocus&&!navContainerFocus.contains(event.relatedTarget)&&(topLevelToggles&&topLevelToggles.forEach((toggle=>{toggle.setAttribute("aria-expanded","false")})),nestedToggles&&nestedToggles.forEach((toggle=>{toggle.setAttribute("aria-expanded","false")}))),event.stopImmediatePropagation()}),!0)})),nestedToggles&&nestedToggles.forEach((toggle=>{toggle.addEventListener("click",(event=>{let target=event.target;"LI"!==target.tagName&&(target=target.closest("li")),doBoundsCheck(target),event.stopImmediatePropagation(),event.preventDefault();const wasOpen="true"===toggle.getAttribute("aria-expanded");nestedToggles.forEach((other=>{other.setAttribute("aria-expanded","false")})),wasOpen||toggle.setAttribute("aria-expanded","true")}),!0),toggle.addEventListener("focus",(()=>{nestedToggles.forEach((other=>{other.setAttribute("aria-expanded","false")}))}),!0)}));const focusMenuItem=(items,index)=>{index<0?index=items.length-1:index>=items.length&&(index=0),items[index].focus()},closeSubmenu=(menuItemEl,moveFocusToParent=!1)=>{const submenu=menuItemEl.closest(".wp-block-navigation-submenu");if(!submenu)return;if(submenu.querySelectorAll('.wp-block-navigation-submenu__toggle[aria-expanded="true"]').forEach((toggle=>{toggle.setAttribute("aria-expanded","false")})),moveFocusToParent){const parentLi=submenu.closest("li");if(parentLi){const parentToggle=parentLi.querySelector('button[role="menuitem"]'),parentAnchor=parentLi.querySelector('a[role="menuitem"]');parentToggle&&parentToggle.focus(),parentAnchor&&parentAnchor.focus()}}},moveDownSiblingMenu=currentItem=>{const parentLi=currentItem.closest("li");if(!parentLi)return;if("a"===currentItem.localName){const sameLiButton=parentLi.querySelector('button[role="menuitem"]');if(sameLiButton&&sameLiButton!==currentItem)return void sameLiButton.focus()}let siblingLi=parentLi.nextElementSibling;for(;siblingLi&&"li"!==siblingLi.tagName.toLowerCase();)siblingLi=siblingLi.nextElementSibling;if(!siblingLi)return;const siblingAnchor=siblingLi.querySelector('a[role="menuitem"]');siblingAnchor&&siblingAnchor.focus()},moveUpSiblingMenu=currentItem=>{const parentLi=currentItem.closest("li");if(!parentLi)return;let siblingLi=parentLi.previousElementSibling;for(;siblingLi&&"li"!==siblingLi.tagName.toLowerCase();)siblingLi=siblingLi.previousElementSibling;if(!siblingLi)return;const currentItemMenuItem=parentLi.querySelector('a[role="menuitem"]'),itemMenuItem=siblingLi.querySelector('a[role="menuitem"]'),buttonMenuItem=siblingLi.querySelector('button[role="menuitem"]');"a"===currentItem.localName?buttonMenuItem?buttonMenuItem.focus():itemMenuItem.focus():currentItemMenuItem.focus()};if(navContainer){const allMenuItems=Array.from(navContainer.querySelectorAll('[role="menuitem"]')),topLevelItems=Array.from(navContainer.querySelectorAll('.wp-block-navigation__container > li > *[role="menuitem"]'));navContainer.addEventListener("keydown",(event=>{const key=event.key,currentItem=document.activeElement;if(!allMenuItems.includes(currentItem))return;"ArrowDown"!==key&&"ArrowUp"!==key&&"ArrowLeft"!==key&&"ArrowRight"!==key&&"Home"!==key&&"End"!==key||event.preventDefault();const currentIndex=allMenuItems.indexOf(currentItem);switch(key){case"Escape":{const openToggles=[...document.querySelectorAll('.wp-block-navigation-submenu__toggle[aria-expanded="true"]')];if(!openToggles.length)return;openToggles.forEach((toggle=>{toggle.setAttribute("aria-expanded","false");const submenu=toggle.closest(".wp-block-navigation-submenu");submenu&&submenu.contains(document.activeElement)&&toggle.focus()})),event.stopPropagation();break}case"ArrowDown":topLevelItems.includes(currentItem)?((currentItem,event)=>{if(event.preventDefault(),!currentItem.closest("li"))return;let siblingUl=currentItem.nextElementSibling;for(;siblingUl&&!siblingUl.classList.contains("wp-block-navigation__submenu-container");)siblingUl=siblingUl.nextElementSibling;if(!siblingUl)return;const firstMenuItem=siblingUl.querySelector('[role="menuitem"]');firstMenuItem&&firstMenuItem.focus()})(currentItem,event):(currentItem.localName,moveDownSiblingMenu(currentItem));break;case"ArrowUp":if("button"===currentItem.localName)focusMenuItem(allMenuItems,currentIndex-1);else{const parentLi=currentItem.closest("li");if(!parentLi)break;const parentUl=parentLi.closest("ul");if(!parentUl)break;const directLis=Array.from(parentUl.children).filter((el=>"li"===el.tagName.toLowerCase()));directLis.length&&directLis[0]!==parentLi?moveUpSiblingMenu(currentItem):(closeSubmenu(currentItem),focusMenuItem(allMenuItems,currentIndex-1))}break;case"ArrowRight":if(topLevelItems.includes(currentItem)){const topIndex=topLevelItems.indexOf(currentItem);focusMenuItem(topLevelItems,topIndex+1)}else"button"===currentItem.localName?((menuItemEl=>{var _a;const submenu=menuItemEl.closest(".wp-block-navigation-submenu"),toggle=null==(_a=menuItemEl.closest(".wp-block-navigation-submenu"))?void 0:_a.querySelector(".wp-block-navigation-submenu__toggle");if(toggle){toggle.setAttribute("aria-expanded","true");const submenuItems=toggle.closest(".wp-block-navigation-submenu").querySelectorAll('button[role="menuitem"]');submenuItems.length&&(submenuItems[0].focus(),doBoundsCheck(submenu))}})(currentItem),focusMenuItem(allMenuItems,currentIndex+1)):moveDownSiblingMenu(currentItem);break;case"ArrowLeft":if(topLevelItems.includes(currentItem)){const topIndex=topLevelItems.indexOf(currentItem);focusMenuItem(topLevelItems,topIndex-1)}else{const containerUl=currentItem.closest("ul");if(!containerUl)return;const directLis=Array.from(containerUl.children).filter((node=>"li"===node.tagName.toLowerCase()));if(!directLis.length)return;const firstMenuItem=directLis[0].querySelector('a[role="menuitem"]');"button"===currentItem.localName?(focusMenuItem(allMenuItems,currentIndex-1),closeSubmenu(currentItem)):"a"===currentItem.localName&&(firstMenuItem===currentItem?closeSubmenu(currentItem,!0):moveUpSiblingMenu(currentItem))}break;case"Home":topLevelItems.includes(currentItem)?focusMenuItem(allMenuItems,0):(currentItem=>{const parentUl=currentItem.closest("ul");if(!parentUl)return;const firstLi=parentUl.querySelector("li");if(!firstLi)return;const firstMenuItem=firstLi.querySelector('[role="menuitem"]');firstMenuItem&&firstMenuItem.focus()})(currentItem);break;case"End":topLevelItems.includes(currentItem)?focusMenuItem(allMenuItems,allMenuItems.length-1):(currentItem=>{const parentUl=currentItem.closest("ul");if(!parentUl)return;const directLis=Array.from(parentUl.children).filter((el=>"li"===el.tagName.toLowerCase()));if(!directLis.length)return;const lastLi=directLis[directLis.length-1],directMenuItems=Array.from(lastLi.children).filter((el=>"menuitem"===el.getAttribute("role")));if(!directMenuItems.length)return;directMenuItems[directMenuItems.length-1].focus()})(currentItem)}}))}}))};"complete"===document.readyState?domNavReady():document.addEventListener("DOMContentLoaded",domNavReady);const bcgovBlockThemePluginSearch=()=>{window.requestAnimationFrame((()=>{const searchInput=document.querySelector(".wp-block-search__input"),resultDetails=document.querySelector(".result-details");null!==searchInput&&null!==resultDetails&&(()=>{const escapedTerms=(input=>{const regex=/"([^"]+)"|\b(\w+)\b/g,matches=[];let match;for(;null!==(match=regex.exec(input));)matches.push(match[1]||match[2]);return matches})(searchInput.value.trim()).filter((term=>term.length>=3)).map((term=>term.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))),regex=new RegExp(`(${escapedTerms.join("|")})`,"gi"),walkNodes=node=>{if(node.nodeType===Node.TEXT_NODE){if(regex.test(node.nodeValue)){const parent=node.parentNode,fragments=node.nodeValue.split(regex),fragmentContainer=document.createDocumentFragment();fragments.forEach((fragment=>{if(regex.test(fragment)){const mark=document.createElement("mark");mark.textContent=fragment,fragmentContainer.appendChild(mark)}else fragmentContainer.appendChild(document.createTextNode(fragment))})),parent.replaceChild(fragmentContainer,node)}}else node.nodeType===Node.ELEMENT_NODE&&node.childNodes.forEach(walkNodes)};resultDetails.childNodes.forEach(walkNodes)})();const toggleSearchBtn=document.querySelector(".toggle-search-btn a"),searchFieldContainer=document.querySelector("#search-field-container");if(!toggleSearchBtn||!searchFieldContainer)return;const searchField=searchFieldContainer.querySelector("input"),searchBtn=searchFieldContainer.querySelector("button"),searchFieldLink=searchFieldContainer.querySelector("a");if(!searchField||!searchBtn)return;let linkInteraction=!1;searchBtn.addEventListener("mousedown",(()=>{linkInteraction=!0})),searchBtn.addEventListener("focusout",(()=>{linkInteraction=!0})),searchFieldLink&&(searchFieldLink.addEventListener("mousedown",(()=>{linkInteraction=!0})),searchFieldLink.addEventListener("focusin",(()=>{linkInteraction=!0})));const overrideBlurIfLinkClicked=event=>{linkInteraction&&(event.stopImmediatePropagation(),linkInteraction=!1)};searchField.addEventListener("blur",overrideBlurIfLinkClicked,!0),searchBtn.addEventListener("blur",overrideBlurIfLinkClicked,!0)}))};"complete"===document.readyState?bcgovBlockThemePluginSearch():document.addEventListener("DOMContentLoaded",bcgovBlockThemePluginSearch);const bcgovBlockThemePluginSideNav=()=>{window.requestAnimationFrame((()=>{const detailsContainer=document.querySelector("#incentive-details-container"),sideNav=document.querySelector("#incentive-side-nav");if(detailsContainer&&sideNav){sideNav.innerHTML="";const headings=detailsContainer.querySelectorAll("h2[id]"),navListContainer=document.createElement("nav");navListContainer.classList.add("side-nav","bb-nav","wp-block-navigation","is-vertical","wp-container-core-navigation-layout-2");const navList=document.createElement("ul");navList.classList.add("side-nav","bb-nav","wp-block-navigation","is-vertical","wp-block-navigation__container"),headings.forEach((heading=>{const id=heading.id,text=heading.textContent.trim(),listItem=document.createElement("li");listItem.classList.add("wp-block-navigation-item","wp-block-navigation-link");const link=document.createElement("a");link.href=`#${id}`,link.textContent=text,link.classList.add("wp-block-navigation-item__content"),listItem.appendChild(link),navList.appendChild(listItem)})),navListContainer.appendChild(navList),sideNav.appendChild(navListContainer),sideNav.classList.remove("admin-instructions")}}))};"complete"===document.readyState?bcgovBlockThemePluginSideNav():document.addEventListener("DOMContentLoaded",bcgovBlockThemePluginSideNav);const bcgovBlockThemePluginTables=()=>{window.requestAnimationFrame((()=>{document.querySelectorAll('figure.wp-block-table[class*="-span-"]').forEach((figure=>{const table=figure.querySelector("table");if(!table)return;const tbody=table.querySelector("tbody");if(!tbody)return;const spanClasses=figure.className.split(" ").filter((cls=>/(col-\d+-span-\d+|row-\d+-span-\d+|col-\d+-row-\d+-span-\d+|row-\d+-col-\d+-span-\d+|cell-\d+-\d+-span-\d+x\d+)/.test(cls))),rows=Array.from(tbody.querySelectorAll("tr"));spanClasses.forEach((spanClass=>{let match;if(match=spanClass.match(/cell-(\d+)-(\d+)-span-(\d+)x(\d+)/)){const[,col,row,rowspan,colspan]=match.map(Number),grid=rows.map((r=>Array.from(r.children))),maxRowSpan=Math.min(rowspan,rows.length-row+1),baseRow=grid[row-1];if(!baseRow)return;const baseCell=baseRow[col-1];if(!baseCell||baseCell.hasAttribute("rowspan")||baseCell.hasAttribute("colspan"))return;const maxColSpan=Math.min(colspan,baseRow.length-col+1);baseCell.setAttribute("rowspan",maxRowSpan),baseCell.setAttribute("colspan",maxColSpan);for(let r=0;r<maxRowSpan;r++){const currentRow=grid[row-1+r];if(currentRow)for(let c=0;c<maxColSpan;c++){if(0===r&&0===c)continue;const targetCell=currentRow[col-1+c];targetCell&&targetCell.classList.add("hidden")}}}else if(match=spanClass.match(/col-(\d+)-row-(\d+)-span-(\d+)/)){const[,col,row,span]=match.map(Number),startRow=rows[row-1];if(!startRow)return;const cell=startRow.children[col-1];if(cell&&!cell.hasAttribute("rowspan")){const maxSpan=Math.min(span,rows.length-row+1);cell.setAttribute("rowspan",maxSpan);for(let i=1;i<maxSpan;i++){const targetRow=rows[row-1+i];if(targetRow){const targetCell=targetRow.children[col-1];targetCell&&targetCell.classList.add("hidden")}}}}else if(match=spanClass.match(/row-(\d+)-col-(\d+)-span-(\d+)/)){const[,row,col,span]=match.map(Number),targetRow=rows[row-1];if(!targetRow)return;const cell=targetRow.children[col-1];if(cell&&!cell.hasAttribute("colspan")){const maxSpan=Math.min(span,targetRow.children.length-col+1);cell.setAttribute("colspan",maxSpan);for(let i=1;i<maxSpan;i++){const targetCell=targetRow.children[col-1+i];targetCell&&targetCell.classList.add("hidden")}}}else if(match=spanClass.match(/col-(\d+)-span-(\d+)/)){const[,col,span]=match.map(Number);if(!rows[0])return;const maxSpan=Math.min(span,rows.length),cell=rows[0].children[col-1];if(cell&&!cell.hasAttribute("rowspan")){cell.setAttribute("rowspan",maxSpan);for(let i=1;i<maxSpan;i++){const row=rows[i];if(row){const targetCell=row.children[col-1];targetCell&&targetCell.classList.add("hidden")}}}}else if(match=spanClass.match(/row-(\d+)-span-(\d+)/)){const[,row,span]=match.map(Number),targetRow=rows[row-1];if(!targetRow)return;const cells=Array.from(targetRow.children),maxSpan=Math.min(span,cells.length);cells[0].hasAttribute("colspan")||(cells[0].setAttribute("colspan",maxSpan),cells.slice(1,maxSpan).forEach((cell=>cell.classList.add("hidden"))))}}))}))}))};"complete"===document.readyState?bcgovBlockThemePluginTables():document.addEventListener("DOMContentLoaded",bcgovBlockThemePluginTables);const cleanbcAccessibilityLoader=()=>{window.requestAnimationFrame((()=>{if("cleanbc"===window.site.customBodyClass){document.querySelector(".custom-logo-link img").setAttribute("alt","BC Government and Clean BC logos")}}))};"complete"===document.readyState?cleanbcAccessibilityLoader():document.addEventListener("DOMContentLoaded",cleanbcAccessibilityLoader);const betterhomesAccessibilityLoader=()=>{window.requestAnimationFrame((()=>{if("betterhomesbc"===window.site.customBodyClass){document.querySelector(".custom-logo-link img").setAttribute("alt","BC Government and Clean BC Better Homes logos")}}))};"complete"===document.readyState?betterhomesAccessibilityLoader():document.addEventListener("DOMContentLoaded",betterhomesAccessibilityLoader);const betterbuildingsAccessibilityLoader=()=>{window.requestAnimationFrame((()=>{if("betterbuildingsbc"===window.site.customBodyClass){document.querySelector(".custom-logo-link img").setAttribute("alt","BC Government and Clean BC Better Buildings logos")}}))};"complete"===document.readyState?betterbuildingsAccessibilityLoader():document.addEventListener("DOMContentLoaded",betterbuildingsAccessibilityLoader);const goEVAccessibilityLoader=()=>{window.requestAnimationFrame((()=>{if("goelectricbc"===window.site.customBodyClass){document.querySelector(".custom-logo-link img").setAttribute("alt","BC Government and Clean BC Go Electric logos")}}))};"complete"===document.readyState?goEVAccessibilityLoader():document.addEventListener("DOMContentLoaded",goEVAccessibilityLoader);
