function qs(selector,parent=document){if(!selector)throw new Error("A selector argument is required for the qs function");return parent.querySelector(selector)}function qsa(selector,parent=document){if(!selector)throw new Error("A selector argument is required for the qsa function");return[...parent.querySelectorAll(selector)]}function addSafeEventListenerPlugin(el,event,handler,options){el&&"function"==typeof el.addEventListener?el.addEventListener(event,handler,options):console.warn("el is not a valid EventTarget or does not support addEventListener")}const bcgovBlockThemePluginAccessibility=()=>{window.requestAnimationFrame((()=>{if(qs(".actions-accordion-header")){const getSiblings=function(elem){const siblings=[];let sibling=elem.parentNode.firstChild;for(;sibling;)1===sibling.nodeType&&sibling!==elem&&siblings.push(sibling),sibling=sibling.nextSibling;return siblings};qsa(".labelInjector").forEach((label=>{const siblings=getSiblings(label),ariaLabel=label.getAttribute("data-label");siblings.forEach((el=>{if(el.classList.contains("wp-block-buttons")){qs(".wp-block-button__link",el).setAttribute("aria-label",ariaLabel)}})),label.remove()}))}}))};"complete"===document.readyState?bcgovBlockThemePluginAccessibility():addSafeEventListenerPlugin(document,"DOMContentLoaded",bcgovBlockThemePluginAccessibility());const bcgovBlockThemePluginDefnitions=()=>{window.requestAnimationFrame((()=>{const links=document.querySelectorAll("a"),definitionLinks=Array.from(links).filter((function(link){return link.href.includes("definitions")}));if(definitionLinks.length>0){let showDialog2=function(){dialog.showModal()};const dialog=document.createElement("dialog");dialog.id="dialog",dialog.className="dialog",dialog.setAttribute("aria-modal",!0),dialog.setAttribute("aria-live","polite"),dialog.innerHTML='<div class="dialog-content"></div><button id="close-dialog" aria-label="closes defintion dialog">Close</button>',document.body.appendChild(dialog);document.getElementById("close-dialog").addEventListener("click",(function(){dialog.close()})),definitionLinks.forEach((function(link){link.classList.add("icon-definition"),link.setAttribute("aria-label","opens definition dialog for: "+link.text),link.addEventListener("click",(function(event){event.preventDefault();const url=this.getAttribute("href");fetch(url).then((function(response){return response.text()})).then((function(html){const doc=(new window.DOMParser).parseFromString(html,"text/html"),title=doc.querySelector("h1.wp-block-post-title").innerText,content=doc.querySelector(".entry-content").innerHTML,dialogContent=document.querySelector("#dialog .dialog-content");dialogContent.innerHTML='<h2 tabindex="0">'+title+"</h2>"+content,showDialog2(),dialogContent.querySelector("h2").focus()})).catch((function(error){console.error("Error fetching content:",error)}))}))}))}}))};"complete"===document.readyState?bcgovBlockThemePluginDefnitions():addSafeEventListenerPlugin(document,"DOMContentLoaded",bcgovBlockThemePluginDefnitions());const bcgovBlockThemePluginDomLoader=()=>{window.requestAnimationFrame((()=>{document.querySelector("body").classList.add("cleanbc-plugin");const iconButtons=document.querySelectorAll("a.icon");iconButtons.length&&iconButtons.forEach((button=>{null===button.getAttribute("href")&&(button.setAttribute("tabindex","-1"),button.style.pointerEvents="none")}));const iconButtonContainers=document.querySelectorAll(".wp-block-button.is-style-icon");iconButtonContainers.length&&iconButtonContainers.forEach((container=>{const containerLink=container.querySelector("a");null===containerLink||container.classList.contains("has-size-large")||(containerLink.style.outlineOffset="1rem")}))}))};"complete"===document.readyState?bcgovBlockThemePluginDomLoader():addSafeEventListenerPlugin(document,"DOMContentLoaded",bcgovBlockThemePluginDomLoader());const bcgovBlockThemePluginDriverCategoryQuery=()=>{window.requestAnimationFrame((()=>{function processCategories(data){const categories=[],uniqueCategoryNames=new Set;data.forEach((item=>{var _a;((null==(_a=null==item?void 0:item._embedded)?void 0:_a["wp:term"])||[]).forEach((categoryArray=>{categoryArray.forEach((category=>{var _a2;const categoryName=null==category?void 0:category.name,categoryImage=null==(_a2=null==category?void 0:category.acf)?void 0:_a2.category_image;categoryName&&"Actions we are taking"!==categoryName&&!uniqueCategoryNames.has(categoryName)&&(uniqueCategoryNames.add(categoryName),categories.push({name:categoryName,acf:{category_image:categoryImage||null}}))}))}))})),function replaceLinks(categories){document.querySelectorAll("div.taxonomy-category").forEach((categoryDiv=>{const links=categoryDiv.querySelectorAll("a");categoryDiv.querySelectorAll("span.wp-block-post-terms__separator").forEach((separator=>separator.remove())),links.forEach((link=>{var _a;const categoryName=link.innerText.trim();if("Actions we are taking"===categoryName)return void link.remove();const matchingCategory=categories.find((category=>category.name===categoryName));if(matchingCategory){const categoryImage=null==(_a=null==matchingCategory?void 0:matchingCategory.acf)?void 0:_a.category_image;if(categoryImage){const imgElement=document.createElement("img");imgElement.src=categoryImage,imgElement.alt=categoryName,imgElement.title=categoryName,link.replaceWith(imgElement)}}})),categoryDiv.style.opacity="1"}))}(categories)}document.querySelectorAll(".wp-block-query.vue-card-container").length&&async function fetchDataAndReplaceLinks(page=1){var _a;try{const perPage=100,cachedData=window.localStorage.getItem("apiData"),cachedTimestamp=window.localStorage.getItem("apiDataTimestamp"),existingData=cachedData?JSON.parse(cachedData):[];if(cachedData&&cachedTimestamp)try{const timeDiff=(new Date).getTime()-parseInt(cachedTimestamp,10);if(timeDiff<864e5)return void processCategories(existingData)}catch(cacheError){console.error("Error parsing cached data:",cacheError.message)}const response=await fetch(`${null==(_a=window.site)?void 0:_a.domain}/wp-json/wp/v2/project?_embed&per_page=${perPage}&page=${page}&_category_image=true`);if(!response.ok)throw new Error(`HTTP error! Status: ${response.status}`);const newData=await response.json(),mergedData=existingData.concat(newData);window.localStorage.setItem("apiData",JSON.stringify(mergedData)),newData.length>=perPage&&await fetchDataAndReplaceLinks(page+1),processCategories(mergedData),window.localStorage.setItem("apiDataTimestamp",(new Date).getTime().toString())}catch(error){console.error("Error fetching data:",error.message)}}()}))};"complete"===document.readyState?bcgovBlockThemePluginDriverCategoryQuery():addSafeEventListenerPlugin(document,"DOMContentLoaded",bcgovBlockThemePluginDriverCategoryQuery());const bcgovBlockThemePluginLandingBanners=()=>{window.requestAnimationFrame((()=>{const isHomeBanner=qsa(".home-cover-banner"),isLandingBanner=qsa(".landing-cover-banner");if(isHomeBanner.length||isLandingBanner.length){const svgNamespace="http://www.w3.org/2000/svg",svg=document.createElementNS(svgNamespace,"svg"),clipElementDefs=document.createElementNS(svgNamespace,"defs"),clipElementClipPath=document.createElementNS(svgNamespace,"clipPath");clipElementClipPath.setAttribute("id","svgPath");const clipElementPath=document.createElementNS(svgNamespace,"path");clipElementPath.setAttribute("d","M0,77.2v-24.7c0,-8.6,6.8,-15.6,15.3,-16l901.5,-36.6c44.3,-1.7,81.5,33.1,83.2,77.5l-1000,-0.2z"),clipElementClipPath.setAttribute("transform","scale(1.44)"),svg.appendChild(clipElementDefs),clipElementDefs.appendChild(clipElementClipPath),clipElementClipPath.appendChild(clipElementPath),svg.setAttribute("xmlns",svgNamespace),svg.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),svg.setAttribute("version","1.1"),svg.setAttribute("width","100"),svg.setAttribute("height","100"),svg.setAttribute("viewBox","0 0 100 100"),svg.setAttribute("preserveAspectRatio","none"),svg.style.position="absolute",svg.style.top="0",svg.style.left="0",svg.style.visibility="visible";document.getElementsByTagName("body")[0].insertAdjacentElement("afterbegin",svg)}}))};"complete"===document.readyState?bcgovBlockThemePluginLandingBanners():addSafeEventListenerPlugin(document,"DOMContentLoaded",bcgovBlockThemePluginLandingBanners());const bcgovBlockThemePluginSearch=()=>{window.requestAnimationFrame((()=>{const toggleSearchBtn=qs(".toggle-search-btn a"),searchFieldContainer=qs("#search-field-container");if(toggleSearchBtn&&searchFieldContainer){const siblingElement=searchFieldContainer.previousElementSibling,searchInput=qs("input",searchFieldContainer),searchButton=qs("button",searchFieldContainer);searchFieldContainer&&siblingElement&&siblingElement.parentNode.insertBefore(searchFieldContainer,siblingElement),toggleSearchBtn.addEventListener("click",(function(event){event.preventDefault(),searchFieldContainer&&(searchFieldContainer.classList.contains("hidden")?(searchFieldContainer.classList.remove("hidden"),searchInput&&searchInput.focus()):searchFieldContainer.classList.add("hidden"))})),toggleSearchBtn.addEventListener("keydown",(event=>{"Space"!==event.code&&"Enter"!==event.code||(event.preventDefault(),toggleSearchBtn.click())})),searchFieldContainer&&(searchInput.addEventListener("blur",(function(event){event.preventDefault(),window.requestAnimationFrame((()=>{searchButton!==event.target.ownerDocument.activeElement&&toggleSearchBtn!==event.target.ownerDocument.activeElement&&(toggleSearchBtn.focus(),toggleSearchBtn.click())}))})),searchButton.addEventListener("blur",(function(event){event.preventDefault(),window.requestAnimationFrame((()=>{searchInput!==event.target.ownerDocument.activeElement&&toggleSearchBtn!==event.target.ownerDocument.activeElement&&(toggleSearchBtn.focus(),toggleSearchBtn.click())}))})))}}))};"complete"===document.readyState?bcgovBlockThemePluginSearch():addSafeEventListenerPlugin(document,"DOMContentLoaded",bcgovBlockThemePluginSearch());
